!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/resources/dist/",n(n.s=987)}({2:function(t,e){t.exports=jQuery},26:function(t,e){t.exports=angular},354:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},423:function(t,e,n){(function(t){var n;
/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2017, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */
/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2017, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */
(function(){var r,a,i,o,s,l,h,c,u,f,d,p,g,v,b,m,y,w,_,x,k,S,C,L,T,E,A,P,M,O,$,N,j,R,z,F,B,D,I,W,U,H,G,V,q,X,Y,K,Q,Z,J,tt,et,nt,rt,at,it,ot,st,lt,ht,ct,ut,ft,dt,pt,gt,vt,bt,mt,yt,wt,_t,xt,kt,St,Ct,Lt,Tt,Et,At=[].slice;St=function(){var t,e,n,r,a;for(t={},r=0,e=(a="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;r<e;r++)n=a[r],t["[object "+n+"]"]=n.toLowerCase();return function(e){var n;return n=Object.prototype.toString.call(e),t[n]||"object"}}(),Y=function(t,e,n){return null==e&&(e=0),null==n&&(n=1),t<e&&(t=e),t>n&&(t=n),t},Ct=function(t){return t.length>=3?Array.prototype.slice.call(t):t[0]},k=function(t){var e,n;for(t._clipped=!1,t._unclipped=t.slice(0),e=n=0;n<3;e=++n)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]<0&&(t[e]=0),t[e]>255&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),t[e]>1&&(t[e]=1));return t._clipped||delete t._unclipped,t},o=Math.PI,yt=Math.round,C=Math.cos,P=Math.floor,rt=Math.pow,K=Math.log,_t=Math.sin,xt=Math.sqrt,v=Math.atan2,J=Math.max,g=Math.abs,h=2*o,s=o/3,a=o/180,l=180/o,(x=function(){return arguments[0]instanceof r?arguments[0]:function(t,e,n){n.prototype=t.prototype;var r=new n,a=t.apply(r,e);return Object(a)===a?a:r}(r,arguments,function(){})}).default=x,p=[],null!==t&&null!=t.exports&&(t.exports=x),void 0===(n=function(){return x}.apply(e,[]))||(t.exports=n),x.version="1.4.1",d={},u=[],f=!1,r=function(){function t(){var t,e,n,r,a,i,o,s,l;for(i=this,e=[],s=0,r=arguments.length;s<r;s++)null!=(t=arguments[s])&&e.push(t);if(e.length>1&&(o=e[e.length-1]),null!=d[o])i._rgb=k(d[o](Ct(e.slice(0,-1))));else{for(f||(u=u.sort(function(t,e){return e.p-t.p}),f=!0),l=0,a=u.length;l<a&&!(o=(n=u[l]).test.apply(n,e));l++);o&&(i._rgb=k(d[o].apply(d,e)))}null==i._rgb&&console.warn("unknown format: "+e),null==i._rgb&&(i._rgb=[0,0,0]),3===i._rgb.length&&i._rgb.push(1)}return t.prototype.toString=function(){return this.hex()},t}(),x._input=d,
/**
  	ColorBrewer colors for chroma.js
  
  	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
  	Pennsylvania State University.
  
  	Licensed under the Apache License, Version 2.0 (the "License"); 
  	you may not use this file except in compliance with the License.
  	You may obtain a copy of the License at	
  	http://www.apache.org/licenses/LICENSE-2.0
  
  	Unless required by applicable law or agreed to in writing, software distributed
  	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
  	CONDITIONS OF ANY KIND, either express or implied. See the License for the
  	specific language governing permissions and limitations under the License.
  
      @preserve
   */
x.brewer=w={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var t,e;for(t in e=[],w)e.push(w[t.toLowerCase()]=w[t])}(),x.colors=Lt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},H=function(){var t,e,n,r,a,o,s;return r=(e=Ct(arguments))[0],t=e[1],n=e[2],o=(r+16)/116,a=isNaN(t)?o:o+t/500,s=isNaN(n)?o:o-n/200,o=i.Yn*G(o),a=i.Xn*G(a),s=i.Zn*G(s),[Et(3.2404542*a-1.5371385*o-.4985314*s),Et(-.969266*a+1.8760108*o+.041556*s),n=Et(.0556434*a-.2040259*o+1.0572252*s),e.length>3?e[3]:1]},Et=function(t){return 255*(t<=.00304?12.92*t:1.055*rt(t,1/2.4)-.055)},G=function(t){return t>i.t1?t*t*t:i.t2*(t-i.t0)},i={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ut=function(){var t,e,n,r,a,i,o;return n=(r=Ct(arguments))[0],e=r[1],t=r[2],i=(a=vt(n,e,t))[0],[116*(o=a[1])-16,500*(i-o),200*(o-a[2])]},bt=function(t){return(t/=255)<=.04045?t/12.92:rt((t+.055)/1.055,2.4)},Tt=function(t){return t>i.t3?rt(t,1/3):t/i.t2+i.t0},vt=function(){var t,e,n,r;return n=(r=Ct(arguments))[0],e=r[1],t=r[2],n=bt(n),e=bt(e),t=bt(t),[Tt((.4124564*n+.3575761*e+.1804375*t)/i.Xn),Tt((.2126729*n+.7151522*e+.072175*t)/i.Yn),Tt((.0193339*n+.119192*e+.9503041*t)/i.Zn)]},x.lab=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,a=t.apply(r,e);return Object(a)===a?a:r}(r,At.call(arguments).concat(["lab"]),function(){})},d.lab=H,r.prototype.lab=function(){return ut(this._rgb)},b=function(t){var e,n,r,a,i,o,s,l,h,c,u;return 2===(t=function(){var e,n,r;for(r=[],n=0,e=t.length;n<e;n++)a=t[n],r.push(x(a));return r}()).length?(h=function(){var e,n,r;for(r=[],n=0,e=t.length;n<e;n++)a=t[n],r.push(a.lab());return r}(),i=h[0],o=h[1],e=function(t){var e,n;return n=function(){var n,r;for(r=[],e=n=0;n<=2;e=++n)r.push(i[e]+t*(o[e]-i[e]));return r}(),x.lab.apply(x,n)}):3===t.length?(c=function(){var e,n,r;for(r=[],n=0,e=t.length;n<e;n++)a=t[n],r.push(a.lab());return r}(),i=c[0],o=c[1],s=c[2],e=function(t){var e,n;return n=function(){var n,r;for(r=[],e=n=0;n<=2;e=++n)r.push((1-t)*(1-t)*i[e]+2*(1-t)*t*o[e]+t*t*s[e]);return r}(),x.lab.apply(x,n)}):4===t.length?(u=function(){var e,n,r;for(r=[],n=0,e=t.length;n<e;n++)a=t[n],r.push(a.lab());return r}(),i=u[0],o=u[1],s=u[2],l=u[3],e=function(t){var e,n;return n=function(){var n,r;for(r=[],e=n=0;n<=2;e=++n)r.push((1-t)*(1-t)*(1-t)*i[e]+3*(1-t)*(1-t)*t*o[e]+3*(1-t)*t*t*s[e]+t*t*t*l[e]);return r}(),x.lab.apply(x,n)}):5===t.length&&(n=b(t.slice(0,3)),r=b(t.slice(2,5)),e=function(t){return t<.5?n(2*t):r(2*(t-.5))}),e},x.bezier=function(t){var e;return(e=b(t)).scale=function(){return x.scale(e)},e},x.cubehelix=function(t,e,n,r,a){var i,o,s;return null==t&&(t=300),null==e&&(e=-1.5),null==n&&(n=1),null==r&&(r=1),null==a&&(a=[0,1]),i=0,"array"===St(a)?o=a[1]-a[0]:(o=0,a=[a,a]),(s=function(s){var l,c,u,f,d;return l=h*((t+120)/360+e*s),f=rt(a[0]+o*s,r),c=(0!==i?n[0]+s*i:n)*f*(1-f)/2,u=C(l),d=_t(l),x(k([255*(f+c*(-.14861*u+1.78277*d)),255*(f+c*(-.29227*u-.90649*d)),255*(f+c*(1.97294*u)),1]))}).start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?r:(r=t,s)},s.hue=function(t){return null==t?n:("array"===St(n=t)?0===(i=n[1]-n[0])&&(n=n[1]):i=0,s)},s.lightness=function(t){return null==t?a:("array"===St(t)?(a=t,o=t[1]-t[0]):(a=[t,t],o=0),s)},s.scale=function(){return x.scale(s)},s.hue(n),s},x.random=function(){var t,e;for("0123456789abcdef",t="#",e=0;e<6;++e)t+="0123456789abcdef".charAt(P(16*Math.random()));return new r(t)},p=[],z=function(t,e,n,r){var a,i,o,s;for(null==n&&(n=.5),null==r&&(r="rgb"),"object"!==St(t)&&(t=x(t)),"object"!==St(e)&&(e=x(e)),o=0,i=p.length;o<i;o++)if(r===(a=p[o])[0]){s=a[1](t,e,n,r);break}if(null==s)throw"color mode "+r+" is not supported";return s.alpha(t.alpha()+n*(e.alpha()-t.alpha()))},x.interpolate=z,r.prototype.interpolate=function(t,e,n){return z(this,t,e,n)},x.mix=z,r.prototype.mix=r.prototype.interpolate,d.rgb=function(){var t,e,n,r;for(t in n=[],e=Ct(arguments))r=e[t],n.push(r);return n},x.rgb=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,a=t.apply(r,e);return Object(a)===a?a:r}(r,At.call(arguments).concat(["rgb"]),function(){})},r.prototype.rgb=function(t){return null==t&&(t=!0),t?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},r.prototype.rgba=function(t){return null==t&&(t=!0),t?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},u.push({p:3,test:function(t){var e;return e=Ct(arguments),"array"===St(e)&&3===e.length?"rgb":4===e.length&&"number"===St(e[3])&&e[3]>=0&&e[3]<=1?"rgb":void 0}}),d.lrgb=d.rgb,D=function(t,e,n,a){var i,o;return i=t._rgb,o=e._rgb,new r(xt(rt(i[0],2)*(1-n)+rt(o[0],2)*n),xt(rt(i[1],2)*(1-n)+rt(o[1],2)*n),xt(rt(i[2],2)*(1-n)+rt(o[2],2)*n),a)},c=function(t){var e,n,a,i,o;for(e=1/t.length,o=[0,0,0,0],a=0,n=t.length;a<n;a++)i=t[a]._rgb,o[0]+=rt(i[0],2)*e,o[1]+=rt(i[1],2)*e,o[2]+=rt(i[2],2)*e,o[3]+=i[3]*e;return o[0]=xt(o[0]),o[1]=xt(o[1]),o[2]=xt(o[2]),o[3]>1&&(o[3]=1),new r(k(o))},p.push(["lrgb",D]),x.average=function(t,e){var n,r,a,i,s,l,h,u,f,d,p,g,b;if(null==e&&(e="rgb"),f=t.length,h=(t=t.map(function(t){return x(t)})).splice(0,1)[0],"lrgb"===e)return c(t);for(u in i=[],s=0,l=0,g=h.get(e))g[u]=g[u]||0,i.push(isNaN(g[u])?0:1),"h"!==e.charAt(u)||isNaN(g[u])||(n=g[u]/180*o,s+=C(n),l+=_t(n));for(r=h.alpha(),p=0,d=t.length;p<d;p++)for(u in b=(a=t[p]).get(e),r+=a.alpha(),g)isNaN(b[u])||(i[u]+=1,"h"===e.charAt(u)?(n=b[u]/180*o,s+=C(n),l+=_t(n)):g[u]+=b[u]);for(u in g)if("h"===e.charAt(u)){for(n=v(l/i[u],s/i[u])/o*180;n<0;)n+=360;for(;n>=360;)n-=360;g[u]=n}else g[u]=g[u]/i[u];return x(g,e).alpha(r/f)},O=function(t){var e,n;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[(n=parseInt(t,16))>>16,n>>8&255,255&n,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),[(n=parseInt(t,16))>>24&255,n>>16&255,n>>8&255,yt((255&n)/255*100)/100];if(null!=d.css&&(e=d.css(t)))return e;throw"unknown color: "+t},st=function(t,e){var n,r,a,i,o,s;return null==e&&(e="auto"),o=t[0],a=t[1],r=t[2],n=t[3],"auto"===e&&(e=n<1?"rgba":"rgb"),o=Math.round(o),a=Math.round(a),r=Math.round(r),s=(s="000000"+(o<<16|a<<8|r).toString(16)).substr(s.length-6),i=(i="0"+yt(255*n).toString(16)).substr(i.length-2),"#"+function(){switch(e.toLowerCase()){case"rgba":return s+i;case"argb":return i+s;default:return s}}()},d.hex=function(t){return O(t)},x.hex=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,a=t.apply(r,e);return Object(a)===a?a:r}(r,At.call(arguments).concat(["hex"]),function(){})},r.prototype.hex=function(t){return null==t&&(t="auto"),st(this._rgb,t)},u.push({p:4,test:function(t){if(1===arguments.length&&"string"===St(t))return"hex"}}),j=function(){var t,e,n,r,a,i,o,s,l,h,c,u,f,d;if(a=(t=Ct(arguments))[0],c=t[1],o=t[2],0===c)l=r=e=255*o;else{for(n=[0,0,0],u=2*o-(f=o<.5?o*(1+c):o+c-o*c),(d=[0,0,0])[0]=(a/=360)+1/3,d[1]=a,d[2]=a-1/3,i=s=0;s<=2;i=++s)d[i]<0&&(d[i]+=1),d[i]>1&&(d[i]-=1),6*d[i]<1?n[i]=u+6*(f-u)*d[i]:2*d[i]<1?n[i]=f:3*d[i]<2?n[i]=u+(f-u)*(2/3-d[i])*6:n[i]=u;l=(h=[yt(255*n[0]),yt(255*n[1]),yt(255*n[2])])[0],r=h[1],e=h[2]}return t.length>3?[l,r,e,t[3]]:[l,r,e]},ht=function(t,e,n){var r,a,i,o,s;return void 0!==t&&t.length>=3&&(t=(o=t)[0],e=o[1],n=o[2]),t/=255,e/=255,n/=255,i=Math.min(t,e,n),a=((J=Math.max(t,e,n))+i)/2,J===i?(s=0,r=Number.NaN):s=a<.5?(J-i)/(J+i):(J-i)/(2-J-i),t===J?r=(e-n)/(J-i):e===J?r=2+(n-t)/(J-i):n===J&&(r=4+(t-e)/(J-i)),(r*=60)<0&&(r+=360),[r,s,a]},x.hsl=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,a=t.apply(r,e);return Object(a)===a?a:r}(r,At.call(arguments).concat(["hsl"]),function(){})},d.hsl=j,r.prototype.hsl=function(){return ht(this._rgb)},R=function(){var t,e,n,r,a,i,o,s,l,h,c,u,f,d,p,g,v,b;if(a=(t=Ct(arguments))[0],g=t[1],b=t[2],b*=255,0===g)l=r=e=b;else switch(360===a&&(a=0),a>360&&(a-=360),a<0&&(a+=360),o=b*(1-g),s=b*(1-g*(n=(a/=60)-(i=P(a)))),v=b*(1-g*(1-n)),i){case 0:l=(h=[b,v,o])[0],r=h[1],e=h[2];break;case 1:l=(c=[s,b,o])[0],r=c[1],e=c[2];break;case 2:l=(u=[o,b,v])[0],r=u[1],e=u[2];break;case 3:l=(f=[o,s,b])[0],r=f[1],e=f[2];break;case 4:l=(d=[v,o,b])[0],r=d[1],e=d[2];break;case 5:l=(p=[b,o,s])[0],r=p[1],e=p[2]}return[l,r,e,t.length>3?t[3]:1]},ct=function(){var t,e,n,r,a,i,o,s,l;return i=(o=Ct(arguments))[0],n=o[1],t=o[2],a=Math.min(i,n,t),e=(J=Math.max(i,n,t))-a,l=J/255,0===J?(r=Number.NaN,s=0):(s=e/J,i===J&&(r=(n-t)/e),n===J&&(r=2+(t-i)/e),t===J&&(r=4+(i-n)/e),(r*=60)<0&&(r+=360)),[r,s,l]},x.hsv=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,a=t.apply(r,e);return Object(a)===a?a:r}(r,At.call(arguments).concat(["hsv"]),function(){})},d.hsv=R,r.prototype.hsv=function(){return ct(this._rgb)},et=function(t){return"number"===St(t)&&t>=0&&t<=16777215?[t>>16,t>>8&255,255&t,1]:(console.warn("unknown num color: "+t),[0,0,0,1])},pt=function(){var t;return((t=Ct(arguments))[0]<<16)+(t[1]<<8)+t[2]},x.num=function(t){return new r(t,"num")},r.prototype.num=function(t){return null==t&&(t="rgb"),pt(this._rgb,t)},d.num=et,u.push({p:1,test:function(t){if(1===arguments.length&&"number"===St(t)&&t>=0&&t<=16777215)return"num"}}),M=function(){var t,e,n,r,a,i,o,s,l,h,c,u,f,d,p,g,v,b,m,y;if(s=(n=Ct(arguments))[0],a=n[1],e=n[2],o=o/100*255,t=255*(a/=100),0===a)u=o=r=e;else switch(360===s&&(s=0),s>360&&(s-=360),s<0&&(s+=360),c=(h=e*(1-a))+t*(1-(i=(s/=60)-(l=P(s)))),m=h+t*i,y=h+t,l){case 0:u=(f=[y,m,h])[0],o=f[1],r=f[2];break;case 1:u=(d=[c,y,h])[0],o=d[1],r=d[2];break;case 2:u=(p=[h,y,m])[0],o=p[1],r=p[2];break;case 3:u=(g=[h,c,y])[0],o=g[1],r=g[2];break;case 4:u=(v=[m,h,y])[0],o=v[1],r=v[2];break;case 5:u=(b=[y,h,c])[0],o=b[1],r=b[2]}return[u,o,r,n.length>3?n[3]:1]},ot=function(){var t,e,n,r,a,i,o,s,l;return s=(l=Ct(arguments))[0],a=l[1],e=l[2],o=Math.min(s,a,e),n=100*(r=(J=Math.max(s,a,e))-o)/255,t=o/(255-r)*100,0===r?i=Number.NaN:(s===J&&(i=(a-e)/r),a===J&&(i=2+(e-s)/r),e===J&&(i=4+(s-a)/r),(i*=60)<0&&(i+=360)),[i,n,t]},x.hcg=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,a=t.apply(r,e);return Object(a)===a?a:r}(r,At.call(arguments).concat(["hcg"]),function(){})},d.hcg=M,r.prototype.hcg=function(){return ot(this._rgb)},L=function(t){var e,n,r,a,i,o,s,l;if(t=t.toLowerCase(),null!=x.colors&&x.colors[t])return O(x.colors[t]);if(i=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=i.slice(1,4),a=o=0;o<=2;a=++o)s[a]=+s[a];s[3]=1}else if(i=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=i.slice(1,5),a=l=0;l<=3;a=++l)s[a]=+s[a];else if(i=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=i.slice(1,4),a=e=0;e<=2;a=++e)s[a]=yt(2.55*s[a]);s[3]=1}else if(i=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=i.slice(1,5),a=n=0;n<=2;a=++n)s[a]=yt(2.55*s[a]);s[3]=+s[3]}else(i=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((r=i.slice(1,4))[1]*=.01,r[2]*=.01,(s=j(r))[3]=1):(i=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((r=i.slice(1,4))[1]*=.01,r[2]*=.01,(s=j(r))[3]=+i[4]);return s},it=function(t){var e;return"rgb"===(e=t[3]<1?"rgba":"rgb")?e+"("+t.slice(0,3).map(yt).join(",")+")":"rgba"===e?e+"("+t.slice(0,3).map(yt).join(",")+","+t[3]+")":void 0},mt=function(t){return yt(100*t)/100},N=function(t,e){var n;return n=e<1?"hsla":"hsl",t[0]=mt(t[0]||0),t[1]=mt(100*t[1])+"%",t[2]=mt(100*t[2])+"%","hsla"===n&&(t[3]=e),n+"("+t.join(",")+")"},d.css=function(t){return L(t)},x.css=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,a=t.apply(r,e);return Object(a)===a?a:r}(r,At.call(arguments).concat(["css"]),function(){})},r.prototype.css=function(t){return null==t&&(t="rgb"),"rgb"===t.slice(0,3)?it(this._rgb):"hsl"===t.slice(0,3)?N(this.hsl(),this.alpha()):void 0},d.named=function(t){return O(Lt[t])},u.push({p:5,test:function(t){if(1===arguments.length&&null!=Lt[t])return"named"}}),r.prototype.name=function(t){var e,n;for(n in arguments.length&&(Lt[t]&&(this._rgb=O(Lt[t])),this._rgb[3]=1),e=this.hex("rgb"),Lt)if(e===Lt[n])return n;return e},V=function(){var t,e,n,r;return n=(r=Ct(arguments))[0],t=r[1],e=r[2],[n,C(e*=a)*t,_t(e)*t]},q=function(){var t,e,n,r,a,i,o,s,l;return o=(n=Ct(arguments))[0],a=n[1],i=n[2],t=(s=V(o,a,i))[0],e=s[1],r=s[2],[(l=H(t,e,r))[0],l[1],r=l[2],n.length>3?n[3]:1]},U=function(){var t,e,n,r,a,i;return a=(i=Ct(arguments))[0],t=i[1],e=i[2],n=xt(t*t+e*e),r=(v(e,t)*l+360)%360,0===yt(1e4*n)&&(r=Number.NaN),[a,n,r]},ft=function(){var t,e,n,r,a,i,o;return a=(i=Ct(arguments))[0],n=i[1],e=i[2],r=(o=ut(a,n,e))[0],t=o[1],e=o[2],U(r,t,e)},x.lch=function(){var t;return t=Ct(arguments),new r(t,"lch")},x.hcl=function(){var t;return t=Ct(arguments),new r(t,"hcl")},d.lch=q,d.hcl=function(){var t,e,n,r;return e=(r=Ct(arguments))[0],t=r[1],n=r[2],q([n,t,e])},r.prototype.lch=function(){return ft(this._rgb)},r.prototype.hcl=function(){return ft(this._rgb).reverse()},at=function(t){var e,n,r,a,i,o;return null==t&&(t="rgb"),i=(o=Ct(arguments))[0],r=o[1],e=o[2],r/=255,e/=255,[(1-(i/=255)-(a=1-Math.max(i,Math.max(r,e))))*(n=a<1?1/(1-a):0),(1-r-a)*n,(1-e-a)*n,a]},S=function(){var t,e,n,r,a,i;return n=(e=Ct(arguments))[0],a=e[1],i=e[2],r=e[3],t=e.length>4?e[4]:1,1===r?[0,0,0,t]:[n>=1?0:255*(1-n)*(1-r),a>=1?0:255*(1-a)*(1-r),i>=1?0:255*(1-i)*(1-r),t]},d.cmyk=function(){return S(Ct(arguments))},x.cmyk=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,a=t.apply(r,e);return Object(a)===a?a:r}(r,At.call(arguments).concat(["cmyk"]),function(){})},r.prototype.cmyk=function(){return at(this._rgb)},d.gl=function(){var t,e,n,r,a;for(r=function(){var t,n;for(e in n=[],t=Ct(arguments))a=t[e],n.push(a);return n}.apply(this,arguments),t=n=0;n<=2;t=++n)r[t]*=255;return r},x.gl=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,a=t.apply(r,e);return Object(a)===a?a:r}(r,At.call(arguments).concat(["gl"]),function(){})},r.prototype.gl=function(){var t;return[(t=this._rgb)[0]/255,t[1]/255,t[2]/255,t[3]]},dt=function(t,e,n){var r;return t=(r=Ct(arguments))[0],e=r[1],n=r[2],.2126*(t=Q(t))+.7152*(e=Q(e))+.0722*(n=Q(n))},Q=function(t){return(t/=255)<=.03928?t/12.92:rt((t+.055)/1.055,2.4)},W=function(t,e,n,a){var i,o;return i=t._rgb,o=e._rgb,new r(i[0]+n*(o[0]-i[0]),i[1]+n*(o[1]-i[1]),i[2]+n*(o[2]-i[2]),a)},p.push(["rgb",W]),r.prototype.luminance=function(t,e){var n,r,a,i;return null==e&&(e="rgb"),arguments.length?(a=this._rgb,0===t?a=[0,0,0,this._rgb[3]]:1===t?a=[255,255,255,this[3]]:(n=dt(this._rgb),1e-7,r=20,i=function(n,a){var o,s;return o=(s=n.interpolate(a,.5,e)).luminance(),Math.abs(t-o)<1e-7||!r--?s:o>t?i(n,s):i(s,a)},a=n>t?i(x("black"),this).rgba():i(this,x("white")).rgba()),x(a).alpha(this.alpha())):dt(this._rgb)},kt=function(t){var e,n,r,a;return(a=t/100)<66?(r=255,n=-155.25485562709179-.44596950469579133*(n=a-2)+104.49216199393888*K(n),e=a<20?0:.8274096064007395*(e=a-10)-254.76935184120902+115.67994401066147*K(e)):(r=351.97690566805693+.114206453784165*(r=a-55)-40.25366309332127*K(r),n=325.4494125711974+.07943456536662342*(n=a-50)-28.0852963507957*K(n),e=255),[r,n,e]},gt=function(){var t,e,n,r,a,i,o;for(r=(a=Ct(arguments))[0],a[1],t=a[2],n=1e3,e=4e4,.4;e-n>.4;)(i=kt(o=.5*(e+n)))[2]/i[0]>=t/r?e=o:n=o;return yt(o)},x.temperature=x.kelvin=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,a=t.apply(r,e);return Object(a)===a?a:r}(r,At.call(arguments).concat(["temperature"]),function(){})},d.temperature=d.kelvin=d.K=kt,r.prototype.temperature=function(){return gt(this._rgb)},r.prototype.kelvin=r.prototype.temperature,x.contrast=function(t,e){var n,a,i,o;return"string"!==(i=St(t))&&"number"!==i||(t=new r(t)),"string"!==(o=St(e))&&"number"!==o||(e=new r(e)),(n=t.luminance())>(a=e.luminance())?(n+.05)/(a+.05):(a+.05)/(n+.05)},x.distance=function(t,e,n){var a,i,o,s,l,h,c;for(i in null==n&&(n="lab"),"string"!==(l=St(t))&&"number"!==l||(t=new r(t)),"string"!==(h=St(e))&&"number"!==h||(e=new r(e)),o=t.get(n),s=e.get(n),c=0,o)c+=(a=(o[i]||0)-(s[i]||0))*a;return Math.sqrt(c)},x.deltaE=function(t,e,n,a){var i,s,l,h,c,u,f,d,p,b,m,y,w,_,x,k,S,L,T,E,A,P,M,O;for(null==n&&(n=1),null==a&&(a=1),"string"!==(x=St(t))&&"number"!==x||(t=new r(t)),"string"!==(k=St(e))&&"number"!==k||(e=new r(e)),i=(S=t.lab())[0],l=S[1],c=S[2],s=(L=e.lab())[0],h=L[1],u=L[2],f=xt(l*l+c*c),d=xt(h*h+u*u),E=i<16?.511:.040975*i/(1+.01765*i),T=.0638*f/(1+.0131*f)+.638,_=f<1e-6?0:180*v(c,l)/o;_<0;)_+=360;for(;_>=360;)_-=360;return A=_>=164&&_<=345?.56+g(.2*C(o*(_+168)/180)):.36+g(.4*C(o*(_+35)/180)),w=xt((p=f*f*f*f)/(p+1900)),xt((P=(i-s)/(n*E))*P+(M=(y=f-d)/(a*T))*M+((b=l-h)*b+(m=c-u)*m-y*y)/((O=T*(w*A+1-w))*O))},r.prototype.get=function(t){var e,n,r,a,i;return this,r=(a=t.split("."))[0],e=a[1],i=this[r](),e?(n=r.indexOf(e))>-1?i[n]:console.warn("unknown channel "+e+" in mode "+r):i},r.prototype.set=function(t,e){var n,r,a,i,o;if(this,a=(i=t.split("."))[0],n=i[1])if(o=this[a](),(r=a.indexOf(n))>-1)if("string"===St(e))switch(e.charAt(0)){case"+":case"-":o[r]+=+e;break;case"*":o[r]*=+e.substr(1);break;case"/":o[r]/=+e.substr(1);break;default:o[r]=+e}else o[r]=e;else console.warn("unknown channel "+n+" in mode "+a);else o=e;return x(o,a).alpha(this.alpha())},r.prototype.clipped=function(){return this._rgb._clipped||!1},r.prototype.alpha=function(t){return arguments.length?x.rgb([this._rgb[0],this._rgb[1],this._rgb[2],t]):this._rgb[3]},r.prototype.darken=function(t){var e;return null==t&&(t=1),this,(e=this.lab())[0]-=i.Kn*t,x.lab(e).alpha(this.alpha())},r.prototype.brighten=function(t){return null==t&&(t=1),this.darken(-t)},r.prototype.darker=r.prototype.darken,r.prototype.brighter=r.prototype.brighten,r.prototype.saturate=function(t){var e;return null==t&&(t=1),this,(e=this.lch())[1]+=t*i.Kn,e[1]<0&&(e[1]=0),x.lch(e).alpha(this.alpha())},r.prototype.desaturate=function(t){return null==t&&(t=1),this.saturate(-t)},r.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),x(e[0]*t,e[1]*t,e[2]*t,t)},tt=function(t,e){return t*e/255},T=function(t,e){return t>e?e:t},X=function(t,e){return t>e?t:e},wt=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},nt=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},_=function(t,e){return 255*(1-(1-e/255)/(t/255))},E=function(t,e){return 255===t?255:(t=e/255*255/(1-t/255))>255?255:t},(m=function(t,e,n){if(!m[n])throw"unknown blend mode "+n;return m[n](t,e)}).normal=(y=function(t){return function(e,n){var r,a;return r=x(n).rgb(),a=x(e).rgb(),x(t(r,a),"rgb")}})((A=function(t){return function(e,n){var r,a,i;for(i=[],r=a=0;a<=3;r=++a)i[r]=t(e[r],n[r]);return i}})(function(t,e){return t})),m.multiply=y(A(tt)),m.screen=y(A(wt)),m.overlay=y(A(nt)),m.darken=y(A(T)),m.lighten=y(A(X)),m.dodge=y(A(E)),m.burn=y(A(_)),x.blend=m,x.analyze=function(t){var e,n,r,a;for(r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},n=0,e=t.length;n<e;n++)null==(a=t[n])||isNaN(a)||(r.values.push(a),r.sum+=a,a<r.min&&(r.min=a),a>r.max&&(r.max=a),r.count+=1);return r.domain=[r.min,r.max],r.limits=function(t,e){return x.limits(r,t,e)},r},x.scale=function(t,e){var n,r,a,i,o,s,l,h,c,u,f,d,p,g,v,b,m,y,w,_,k;return c="rgb",u=x("#ccc"),g=0,!1,o=[0,1],p=[],d=[0,0],n=!1,a=[],f=!1,h=0,l=1,i=!1,r={},v=!0,s=1,_=function(t){var e,n,r,i,o,s;if(null==t&&(t=["#fff","#000"]),null!=t&&"string"===St(t)&&null!=x.brewer&&(t=x.brewer[t]||x.brewer[t.toLowerCase()]||t),"array"===St(t)){for(1===t.length&&(t=[t[0],t[0]]),e=r=0,i=(t=t.slice(0)).length-1;0<=i?r<=i:r>=i;e=0<=i?++r:--r)n=t[e],"string"===St(n)&&(t[e]=x(n));for(p.length=0,e=s=0,o=t.length-1;0<=o?s<=o:s>=o;e=0<=o?++s:--s)p.push(e/(t.length-1))}return w(),a=t},m=function(t){var e,r;if(null!=n){for(r=n.length-1,e=0;e<r&&t>=n[e];)e++;return e-1}return 0},k=function(t){return t},function(t){var e,r,a,i,o;return o=t,n.length>2&&(i=n.length-1,e=m(t),a=n[0]+(n[1]-n[0])*(0+.5*g),r=n[i-1]+(n[i]-n[i-1])*(1-.5*g),o=h+(n[e]+.5*(n[e+1]-n[e])-a)/(r-a)*(l-h)),o},y=function(t,e){var i,o,f,g,b,y,w;if(null==e&&(e=!1),isNaN(t)||null===t)return u;if(w=e?t:n&&n.length>2?m(t)/(n.length-2):l!==h?(t-h)/(l-h):1,e||(w=k(w)),1!==s&&(w=rt(w,s)),w=d[0]+w*(1-d[0]-d[1]),w=Math.min(1,Math.max(0,w)),f=Math.floor(1e4*w),v&&r[f])i=r[f];else{if("array"===St(a))for(o=g=0,y=p.length-1;0<=y?g<=y:g>=y;o=0<=y?++g:--g){if(w<=(b=p[o])){i=a[o];break}if(w>=b&&o===p.length-1){i=a[o];break}if(w>b&&w<p[o+1]){w=(w-b)/(p[o+1]-b),i=x.interpolate(a[o],a[o+1],w,c);break}}else"function"===St(a)&&(i=a(w));v&&(r[f]=i)}return i},w=function(){return r={}},_(t),(b=function(t){var e;return e=x(y(t)),f&&e[f]?e[f]():e}).classes=function(t){var e;return null!=t?("array"===St(t)?(n=t,o=[t[0],t[t.length-1]]):(e=x.analyze(o),n=0===t?[e.min,e.max]:x.limits(e,"e",t)),b):n},b.domain=function(t){var e,n,r,i,s,c,u;if(!arguments.length)return o;if(h=t[0],l=t[t.length-1],p=[],r=a.length,t.length===r&&h!==l)for(s=0,i=t.length;s<i;s++)n=t[s],p.push((n-h)/(l-h));else for(e=u=0,c=r-1;0<=c?u<=c:u>=c;e=0<=c?++u:--u)p.push(e/(r-1));return o=[h,l],b},b.mode=function(t){return arguments.length?(c=t,w(),b):c},b.range=function(t,e){return _(t),b},b.out=function(t){return f=t,b},b.spread=function(t){return arguments.length?(g=t,b):g},b.correctLightness=function(t){return null==t&&(t=!0),i=t,w(),k=i?function(t){var e,n,r,a,i,o,s,l,h;for(e=y(0,!0).lab()[0],n=y(1,!0).lab()[0],s=e>n,r=y(t,!0).lab()[0],a=r-(i=e+(n-e)*t),l=0,h=1,o=20;Math.abs(a)>.01&&o-- >0;)s&&(a*=-1),a<0?(l=t,t+=.5*(h-t)):(h=t,t+=.5*(l-t)),r=y(t,!0).lab()[0],a=r-i;return t}:function(t){return t},b},b.padding=function(t){return null!=t?("number"===St(t)&&(t=[t,t]),d=t,b):d},b.colors=function(e,r){var i,s,l,h,c,u,f,d;if(arguments.length<2&&(r="hex"),c=[],0===arguments.length)c=a.slice(0);else if(1===e)c=[b(.5)];else if(e>1)s=o[0],i=o[1]-s,c=function(){u=[];for(var t=0;0<=e?t<e:t>e;0<=e?t++:t--)u.push(t);return u}.apply(this).map(function(t){return b(s+t/(e-1)*i)});else{if(t=[],f=[],n&&n.length>2)for(l=d=1,h=n.length;1<=h?d<h:d>h;l=1<=h?++d:--d)f.push(.5*(n[l-1]+n[l]));else f=o;c=f.map(function(t){return b(t)})}return x[r]&&(c=c.map(function(t){return t[r]()})),c},b.cache=function(t){return null!=t?(v=t,b):v},b.gamma=function(t){return null!=t?(s=t,b):s},b.nodata=function(t){return null!=t?(u=x(t),b):u},b},null==x.scales&&(x.scales={}),x.scales.cool=function(){return x.scale([x.hsl(180,1,.9),x.hsl(250,.7,.4)])},x.scales.hot=function(){return x.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},x.analyze=function(t,e,n){var r,a,i,o,s,l;if(s={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==n&&(n=function(){return!0}),r=function(t){null==t||isNaN(t)||(s.values.push(t),s.sum+=t,t<s.min&&(s.min=t),t>s.max&&(s.max=t),s.count+=1)},l=function(t,a){if(n(t,a))return null!=e&&"function"===St(e)?r(e(t)):null!=e&&"string"===St(e)||"number"===St(e)?r(t[e]):r(t)},"array"===St(t))for(o=0,i=t.length;o<i;o++)l(t[o]);else for(a in t)l(t[a],a);return s.domain=[s.min,s.max],s.limits=function(t,e){return x.limits(s,t,e)},s},x.limits=function(t,e,n){var r,a,i,o,s,l,h,c,u,f,d,p,v,b,m,y,w,_,k,S,C,L,T,E,A,M,O,$,N,j,R,z,F,B,D,I,W,U,H,G,V,q,X,Y,Q,Z,tt,et,nt,at,it,ot,st,lt,ht;if(null==e&&(e="equal"),null==n&&(n=7),"array"===St(t)&&(t=x.analyze(t)),A=t.min,J=t.max,t.sum,lt=t.values.sort(function(t,e){return t-e}),1===n)return[A,J];if(T=[],"c"===e.substr(0,1)&&(T.push(A),T.push(J)),"e"===e.substr(0,1)){for(T.push(A),S=R=1,D=n-1;1<=D?R<=D:R>=D;S=1<=D?++R:--R)T.push(A+S/n*(J-A));T.push(J)}else if("l"===e.substr(0,1)){if(A<=0)throw"Logarithmic scales are only possible for values > 0";for(M=Math.LOG10E*K(A),E=Math.LOG10E*K(J),T.push(A),S=ht=1,I=n-1;1<=I?ht<=I:ht>=I;S=1<=I?++ht:--ht)T.push(rt(10,M+S/n*(E-M)));T.push(J)}else if("q"===e.substr(0,1)){for(T.push(A),S=r=1,q=n-1;1<=q?r<=q:r>=q;S=1<=q?++r:--r)z=(lt.length-1)*S/n,(F=P(z))===z?T.push(lt[F]):(B=z-F,T.push(lt[F]*(1-B)+lt[F+1]*B));T.push(J)}else if("k"===e.substr(0,1)){for($=lt.length,b=new Array($),_=new Array(n),at=!0,N=0,y=null,(y=[]).push(A),S=a=1,X=n-1;1<=X?a<=X:a>=X;S=1<=X?++a:--a)y.push(A+S/n*(J-A));for(y.push(J);at;){for(C=i=0,Y=n-1;0<=Y?i<=Y:i>=Y;C=0<=Y?++i:--i)_[C]=0;for(S=o=0,Q=$-1;0<=Q?o<=Q:o>=Q;S=0<=Q?++o:--o){for(st=lt[S],O=Number.MAX_VALUE,C=s=0,Z=n-1;0<=Z?s<=Z:s>=Z;C=0<=Z?++s:--s)(k=g(y[C]-st))<O&&(O=k,m=C);_[m]++,b[S]=m}for(j=new Array(n),C=l=0,tt=n-1;0<=tt?l<=tt:l>=tt;C=0<=tt?++l:--l)j[C]=null;for(S=h=0,et=$-1;0<=et?h<=et:h>=et;S=0<=et?++h:--h)null===j[w=b[S]]?j[w]=lt[S]:j[w]+=lt[S];for(C=c=0,nt=n-1;0<=nt?c<=nt:c>=nt;C=0<=nt?++c:--c)j[C]*=1/_[C];for(at=!1,C=u=0,W=n-1;0<=W?u<=W:u>=W;C=0<=W?++u:--u)if(j[C]!==y[S]){at=!0;break}y=j,++N>200&&(at=!1)}for(L={},C=f=0,U=n-1;0<=U?f<=U:f>=U;C=0<=U?++f:--f)L[C]=[];for(S=d=0,H=$-1;0<=H?d<=H:d>=H;S=0<=H?++d:--d)L[w=b[S]].push(lt[S]);for(it=[],C=p=0,G=n-1;0<=G?p<=G:p>=G;C=0<=G?++p:--p)it.push(L[C][0]),it.push(L[C][L[C].length-1]);for(it=it.sort(function(t,e){return t-e}),T.push(it[0]),S=v=1,V=it.length-1;v<=V;S=v+=2)ot=it[S],isNaN(ot)||-1!==T.indexOf(ot)||T.push(ot)}return T},$=function(t,e,n){var r,a,i,o;return t=(r=Ct(arguments))[0],e=r[1],n=r[2],isNaN(t)&&(t=0),(t/=360)<1/3?i=1-((a=(1-e)/3)+(o=(1+e*C(h*t)/C(s-h*t))/3)):t<2/3?a=1-((o=(1-e)/3)+(i=(1+e*C(h*(t-=1/3))/C(s-h*t))/3)):o=1-((i=(1-e)/3)+(a=(1+e*C(h*(t-=2/3))/C(s-h*t))/3)),[255*(o=Y(n*o*3)),255*(i=Y(n*i*3)),255*(a=Y(n*a*3)),r.length>3?r[3]:1]},lt=function(){var t,e,n,r,a,i,o;return a=(i=Ct(arguments))[0],e=i[1],t=i[2],h=2*Math.PI,a/=255,e/=255,t/=255,0===(o=1-Math.min(a,e,t)/(r=(a+e+t)/3))?n=0:(n=(a-e+(a-t))/2,n/=Math.sqrt((a-e)*(a-e)+(a-t)*(e-t)),n=Math.acos(n),t>e&&(n=h-n),n/=h),[360*n,o,r]},x.hsi=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,a=t.apply(r,e);return Object(a)===a?a:r}(r,At.call(arguments).concat(["hsi"]),function(){})},d.hsi=$,r.prototype.hsi=function(){return lt(this._rgb)},F=function(t,e,n,r){var a,i,o,s,l,h,c,u,f,d;return"hsl"===r?(f=t.hsl(),d=e.hsl()):"hsv"===r?(f=t.hsv(),d=e.hsv()):"hcg"===r?(f=t.hcg(),d=e.hcg()):"hsi"===r?(f=t.hsi(),d=e.hsi()):"lch"!==r&&"hcl"!==r||(r="hcl",f=t.hcl(),d=e.hcl()),"h"===r.substr(0,1)&&(i=f[0],c=f[1],s=f[2],o=d[0],u=d[1],l=d[2]),isNaN(i)||isNaN(o)?isNaN(i)?isNaN(o)?a=Number.NaN:(a=o,1!==s&&0!==s||"hsv"===r||(h=u)):(a=i,1!==l&&0!==l||"hsv"===r||(h=c)):a=i+n*(o>i&&o-i>180?o-(i+360):o<i&&i-o>180?o+360-i:o-i),null==h&&(h=c+n*(u-c)),x[r](a,h,s+n*(l-s))},I=function(t,e,n,r){var a,i;return a=t.num(),i=e.num(),x.num(a+(i-a)*n,"num")},(p=p.concat(function(){var t,e,n,r;for(r=[],e=0,t=(n=["hsv","hsl","hsi","hcl","lch","hcg"]).length;e<t;e++)Z=n[e],r.push([Z,F]);return r}())).push(["num",I]),B=function(t,e,n,a){var i,o;return i=t.lab(),o=e.lab(),new r(i[0]+n*(o[0]-i[0]),i[1]+n*(o[1]-i[1]),i[2]+n*(o[2]-i[2]),a)},p.push(["lab",B])}).call(this)}).call(this,n(354)(t))},561:function(t,e,n){"use strict";n(562),n(563),n(564)},562:function(t,e,n){var r,a,i;
/**
  * bootstrap-switch - Turn checkboxes and radio buttons into toggle switches.
  *
  * @version v3.3.4
  * @homepage https://bttstrp.github.io/bootstrap-switch
  * @author Mattia Larentis <mattia@larentis.eu> (http://larentis.eu)
  * @license Apache-2.0
  */a=[n(2)],void 0===(i="function"==typeof(r=function(t){"use strict";var e,n=(e=t)&&e.__esModule?e:{default:e},r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n.default||window.jQuery||window.$,o=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$element=i(e),this.options=i.extend({},i.fn.bootstrapSwitch.defaults,this._getElementOptions(),r),this.prevOptions={},this.$wrapper=i("<div>",{class:function(){var t=[];return t.push(n.options.state?"on":"off"),n.options.size&&t.push(n.options.size),n.options.disabled&&t.push("disabled"),n.options.readonly&&t.push("readonly"),n.options.indeterminate&&t.push("indeterminate"),n.options.inverse&&t.push("inverse"),n.$element.attr("id")&&t.push("id-"+n.$element.attr("id")),t.map(n._getClass.bind(n)).concat([n.options.baseClass],n._getClasses(n.options.wrapperClass)).join(" ")}}),this.$container=i("<div>",{class:this._getClass("container")}),this.$on=i("<span>",{html:this.options.onText,class:this._getClass("handle-on")+" "+this._getClass(this.options.onColor)}),this.$off=i("<span>",{html:this.options.offText,class:this._getClass("handle-off")+" "+this._getClass(this.options.offColor)}),this.$label=i("<span>",{html:this.options.labelText,class:this._getClass("label")}),this.$element.on("init.bootstrapSwitch",this.options.onInit.bind(this,e)),this.$element.on("switchChange.bootstrapSwitch",function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];!1===n.options.onSwitchChange.apply(e,r)&&(n.$element.is(":radio")?i('[name="'+n.$element.attr("name")+'"]').trigger("previousState.bootstrapSwitch",!0):n.$element.trigger("previousState.bootstrapSwitch",!0))}),this.$container=this.$element.wrap(this.$container).parent(),this.$wrapper=this.$container.wrap(this.$wrapper).parent(),this.$element.before(this.options.inverse?this.$off:this.$on).before(this.$label).before(this.options.inverse?this.$on:this.$off),this.options.indeterminate&&this.$element.prop("indeterminate",!0),this._init(),this._elementHandlers(),this._handleHandlers(),this._labelHandlers(),this._formHandler(),this._externalLabelHandler(),this.$element.trigger("init.bootstrapSwitch",this.options.state)}return a(t,[{key:"setPrevOptions",value:function(){this.prevOptions=r({},this.options)}},{key:"state",value:function(t,e){return void 0===t?this.options.state:this.options.disabled||this.options.readonly||this.options.state&&!this.options.radioAllOff&&this.$element.is(":radio")?this.$element:(this.$element.is(":radio")?i('[name="'+this.$element.attr("name")+'"]').trigger("setPreviousOptions.bootstrapSwitch"):this.$element.trigger("setPreviousOptions.bootstrapSwitch"),this.options.indeterminate&&this.indeterminate(!1),this.$element.prop("checked",Boolean(t)).trigger("change.bootstrapSwitch",e),this.$element)}},{key:"toggleState",value:function(t){return this.options.disabled||this.options.readonly?this.$element:this.options.indeterminate?(this.indeterminate(!1),this.state(!0)):this.$element.prop("checked",!this.options.state).trigger("change.bootstrapSwitch",t)}},{key:"size",value:function(t){return void 0===t?this.options.size:(null!=this.options.size&&this.$wrapper.removeClass(this._getClass(this.options.size)),t&&this.$wrapper.addClass(this._getClass(t)),this._width(),this._containerPosition(),this.options.size=t,this.$element)}},{key:"animate",value:function(t){return void 0===t?this.options.animate:this.options.animate===Boolean(t)?this.$element:this.toggleAnimate()}},{key:"toggleAnimate",value:function(){return this.options.animate=!this.options.animate,this.$wrapper.toggleClass(this._getClass("animate")),this.$element}},{key:"disabled",value:function(t){return void 0===t?this.options.disabled:this.options.disabled===Boolean(t)?this.$element:this.toggleDisabled()}},{key:"toggleDisabled",value:function(){return this.options.disabled=!this.options.disabled,this.$element.prop("disabled",this.options.disabled),this.$wrapper.toggleClass(this._getClass("disabled")),this.$element}},{key:"readonly",value:function(t){return void 0===t?this.options.readonly:this.options.readonly===Boolean(t)?this.$element:this.toggleReadonly()}},{key:"toggleReadonly",value:function(){return this.options.readonly=!this.options.readonly,this.$element.prop("readonly",this.options.readonly),this.$wrapper.toggleClass(this._getClass("readonly")),this.$element}},{key:"indeterminate",value:function(t){return void 0===t?this.options.indeterminate:this.options.indeterminate===Boolean(t)?this.$element:this.toggleIndeterminate()}},{key:"toggleIndeterminate",value:function(){return this.options.indeterminate=!this.options.indeterminate,this.$element.prop("indeterminate",this.options.indeterminate),this.$wrapper.toggleClass(this._getClass("indeterminate")),this._containerPosition(),this.$element}},{key:"inverse",value:function(t){return void 0===t?this.options.inverse:this.options.inverse===Boolean(t)?this.$element:this.toggleInverse()}},{key:"toggleInverse",value:function(){this.$wrapper.toggleClass(this._getClass("inverse"));var t=this.$on.clone(!0),e=this.$off.clone(!0);return this.$on.replaceWith(e),this.$off.replaceWith(t),this.$on=e,this.$off=t,this.options.inverse=!this.options.inverse,this.$element}},{key:"onColor",value:function(t){return void 0===t?this.options.onColor:(this.options.onColor&&this.$on.removeClass(this._getClass(this.options.onColor)),this.$on.addClass(this._getClass(t)),this.options.onColor=t,this.$element)}},{key:"offColor",value:function(t){return void 0===t?this.options.offColor:(this.options.offColor&&this.$off.removeClass(this._getClass(this.options.offColor)),this.$off.addClass(this._getClass(t)),this.options.offColor=t,this.$element)}},{key:"onText",value:function(t){return void 0===t?this.options.onText:(this.$on.html(t),this._width(),this._containerPosition(),this.options.onText=t,this.$element)}},{key:"offText",value:function(t){return void 0===t?this.options.offText:(this.$off.html(t),this._width(),this._containerPosition(),this.options.offText=t,this.$element)}},{key:"labelText",value:function(t){return void 0===t?this.options.labelText:(this.$label.html(t),this._width(),this.options.labelText=t,this.$element)}},{key:"handleWidth",value:function(t){return void 0===t?this.options.handleWidth:(this.options.handleWidth=t,this._width(),this._containerPosition(),this.$element)}},{key:"labelWidth",value:function(t){return void 0===t?this.options.labelWidth:(this.options.labelWidth=t,this._width(),this._containerPosition(),this.$element)}},{key:"baseClass",value:function(t){return this.options.baseClass}},{key:"wrapperClass",value:function(t){return void 0===t?this.options.wrapperClass:(t||(t=i.fn.bootstrapSwitch.defaults.wrapperClass),this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" ")),this.$wrapper.addClass(this._getClasses(t).join(" ")),this.options.wrapperClass=t,this.$element)}},{key:"radioAllOff",value:function(t){if(void 0===t)return this.options.radioAllOff;var e=Boolean(t);return this.options.radioAllOff===e?this.$element:(this.options.radioAllOff=e,this.$element)}},{key:"onInit",value:function(t){return void 0===t?this.options.onInit:(t||(t=i.fn.bootstrapSwitch.defaults.onInit),this.options.onInit=t,this.$element)}},{key:"onSwitchChange",value:function(t){return void 0===t?this.options.onSwitchChange:(t||(t=i.fn.bootstrapSwitch.defaults.onSwitchChange),this.options.onSwitchChange=t,this.$element)}},{key:"destroy",value:function(){var t=this.$element.closest("form");return t.length&&t.off("reset.bootstrapSwitch").removeData("bootstrap-switch"),this.$container.children().not(this.$element).remove(),this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch"),this.$element}},{key:"_getElementOptions",value:function(){return{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),indeterminate:this.$element.data("indeterminate"),inverse:this.$element.data("inverse"),radioAllOff:this.$element.data("radio-all-off"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),handleWidth:this.$element.data("handle-width"),labelWidth:this.$element.data("label-width"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")}}},{key:"_width",value:function(){var t=this,e=this.$on.add(this.$off).add(this.$label).css("width",""),n="auto"===this.options.handleWidth?Math.round(Math.max(this.$on.width(),this.$off.width())):this.options.handleWidth;return e.width(n),this.$label.width(function(e,r){return"auto"!==t.options.labelWidth?t.options.labelWidth:r<n?n:r}),this._handleWidth=this.$on.outerWidth(),this._labelWidth=this.$label.outerWidth(),this.$container.width(2*this._handleWidth+this._labelWidth),this.$wrapper.width(this._handleWidth+this._labelWidth)}},{key:"_containerPosition",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.state;arguments[1],this.$container.css("margin-left",function(){var n=[0,"-"+t._handleWidth+"px"];return t.options.indeterminate?"-"+t._handleWidth/2+"px":e?t.options.inverse?n[1]:n[0]:t.options.inverse?n[0]:n[1]})}},{key:"_init",value:function(){var t=this,e=function(){t.setPrevOptions(),t._width(),t._containerPosition(),setTimeout(function(){if(t.options.animate)return t.$wrapper.addClass(t._getClass("animate"))},50)};if(this.$wrapper.is(":visible"))e();else var n=window.setInterval(function(){if(t.$wrapper.is(":visible"))return e(),window.clearInterval(n)},50)}},{key:"_elementHandlers",value:function(){var t=this;return this.$element.on({"setPreviousOptions.bootstrapSwitch":this.setPrevOptions.bind(this),"previousState.bootstrapSwitch":function(){t.options=t.prevOptions,t.options.indeterminate&&t.$wrapper.addClass(t._getClass("indeterminate")),t.$element.prop("checked",t.options.state).trigger("change.bootstrapSwitch",!0)},"change.bootstrapSwitch":function(e,n){e.preventDefault(),e.stopImmediatePropagation();var r=t.$element.is(":checked");t._containerPosition(r),r!==t.options.state&&(t.options.state=r,t.$wrapper.toggleClass(t._getClass("off")).toggleClass(t._getClass("on")),n||(t.$element.is(":radio")&&i('[name="'+t.$element.attr("name")+'"]').not(t.$element).prop("checked",!1).trigger("change.bootstrapSwitch",!0),t.$element.trigger("switchChange.bootstrapSwitch",[r])))},"focus.bootstrapSwitch":function(e){e.preventDefault(),t.$wrapper.addClass(t._getClass("focused"))},"blur.bootstrapSwitch":function(e){e.preventDefault(),t.$wrapper.removeClass(t._getClass("focused"))},"keydown.bootstrapSwitch":function(e){!e.which||t.options.disabled||t.options.readonly||37!==e.which&&39!==e.which||(e.preventDefault(),e.stopImmediatePropagation(),t.state(39===e.which))}})}},{key:"_handleHandlers",value:function(){var t=this;return this.$on.on("click.bootstrapSwitch",function(e){return e.preventDefault(),e.stopPropagation(),t.state(!1),t.$element.trigger("focus.bootstrapSwitch")}),this.$off.on("click.bootstrapSwitch",function(e){return e.preventDefault(),e.stopPropagation(),t.state(!0),t.$element.trigger("focus.bootstrapSwitch")})}},{key:"_labelHandlers",value:function(){var t=this,e={click:function(t){t.stopPropagation()},"mousedown.bootstrapSwitch touchstart.bootstrapSwitch":function(e){t._dragStart||t.options.disabled||t.options.readonly||(e.preventDefault(),e.stopPropagation(),t._dragStart=(e.pageX||e.originalEvent.touches[0].pageX)-parseInt(t.$container.css("margin-left"),10),t.options.animate&&t.$wrapper.removeClass(t._getClass("animate")),t.$element.trigger("focus.bootstrapSwitch"))},"mousemove.bootstrapSwitch touchmove.bootstrapSwitch":function(e){if(null!=t._dragStart){var n=(e.pageX||e.originalEvent.touches[0].pageX)-t._dragStart;e.preventDefault(),n<-t._handleWidth||n>0||(t._dragEnd=n,t.$container.css("margin-left",t._dragEnd+"px"))}},"mouseup.bootstrapSwitch touchend.bootstrapSwitch":function(e){if(t._dragStart){if(e.preventDefault(),t.options.animate&&t.$wrapper.addClass(t._getClass("animate")),t._dragEnd){var n=t._dragEnd>-t._handleWidth/2;t._dragEnd=!1,t.state(t.options.inverse?!n:n)}else t.state(!t.options.state);t._dragStart=!1}},"mouseleave.bootstrapSwitch":function(){t.$label.trigger("mouseup.bootstrapSwitch")}};this.$label.on(e)}},{key:"_externalLabelHandler",value:function(){var t=this,e=this.$element.closest("label");e.on("click",function(n){n.preventDefault(),n.stopImmediatePropagation(),n.target===e[0]&&t.toggleState()})}},{key:"_formHandler",value:function(){var t=this.$element.closest("form");t.data("bootstrap-switch")||t.on("reset.bootstrapSwitch",function(){window.setTimeout(function(){t.find("input").filter(function(){return i(this).data("bootstrap-switch")}).each(function(){return i(this).bootstrapSwitch("state",this.checked)})},1)}).data("bootstrap-switch",!0)}},{key:"_getClass",value:function(t){return this.options.baseClass+"-"+t}},{key:"_getClasses",value:function(t){return i.isArray(t)?t.map(this._getClass.bind(this)):[this._getClass(t)]}}]),t}();i.fn.bootstrapSwitch=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Array.prototype.reduce.call(this,function(e,r){var a=i(r),s=a.data("bootstrap-switch"),l=s||new o(r,t);return s||a.data("bootstrap-switch",l),"string"==typeof t?l[t].apply(l,n):e},this)},i.fn.bootstrapSwitch.Constructor=o,i.fn.bootstrapSwitch.defaults={state:!0,size:null,animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,radioAllOff:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp",handleWidth:"auto",labelWidth:"auto",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function(){},onSwitchChange:function(){}}})?r.apply(e,a):r)||(t.exports=i)},563:function(t,e,n){},564:function(t,e){
/**
 * angular-bootstrap-switch
 * @version v0.5.2 - 2017-04-19
 * @author Francesco Pontillo (francescopontillo@gmail.com)
 * @link https://github.com/frapontillo/angular-bootstrap-switch
 * @license Apache License 2.0(http://www.apache.org/licenses/LICENSE-2.0.html)
**/
!function(){"use strict";angular.module("frapontillo.bootstrap-switch",[]),angular.module("frapontillo.bootstrap-switch").directive("bsSwitch",["$parse","$timeout",function(t,e){return{restrict:"A",require:"ngModel",link:function(n,r,a,i){var o=!1,s=function(){if("radio"===a.type)return a.value||t(a.ngValue)(n)||!0;var e=t(a.ngTrueValue)(n);return angular.isUndefined(e)&&(e=!0),e},l=function(t){return!0===n.$eval(t)},h=function(t){return!0===t||"true"===t||!t},c=function(t){return t||void 0},u=function(t){return angular.isUndefined(t)?angular.noop:function(){n.$evalAsync(t)}},f=function(t){return({switchRadioOff:h,switchActive:function(t){return!h(t)},switchAnimate:h,switchLabel:function(t){return t||"&nbsp;"},switchIcon:function(t){if(t)return"<span class='"+t+"'></span>"},switchWrapper:function(t){return t||"wrapper"},switchInverse:l,switchReadonly:l,switchChange:u}[t]||c)(a[t])},d=function(t,e,n){if(o){var r=f(n);t.bootstrapSwitch(e,r)}},p=function(){d(r,"disabled","switchActive")},g=f("switchChange");"radio"===a.type?r.on("change.bootstrapSwitch",function(t){i.$modelValue===i.$viewValue&&t.target.checked!==$(t.target).bootstrapSwitch("state")&&(t.target.checked?i.$setViewValue(s()):s()===i.$viewValue&&i.$setViewValue(void 0),g())}):r.on("switchChange.bootstrapSwitch",function(t){i.$setViewValue(t.target.checked),g()}),function(){a.$observe("switchActive",function(t){h(t)?p():e(p)}),i.$render=function(){!function(){if(!o){var t=i.$modelValue===s();o=!o,r.bootstrapSwitch({radioAllOff:f("switchRadioOff"),disabled:f("switchActive"),state:t,onText:f("switchOnText"),offText:f("switchOffText"),onColor:f("switchOnColor"),offColor:f("switchOffColor"),animate:f("switchAnimate"),size:f("switchSize"),labelText:a.switchLabel?f("switchLabel"):f("switchIcon"),wrapperClass:f("switchWrapper"),handleWidth:f("switchHandleWidth"),labelWidth:f("switchLabelWidth"),inverse:f("switchInverse"),readonly:f("switchReadonly")}),"radio"===a.type?i.$setViewValue(i.$modelValue):i.$setViewValue(t)}}();var t=i.$modelValue;null!=t?r.bootstrapSwitch("state",t===s(),!0):(r.bootstrapSwitch("indeterminate",!0,!0),i.$setViewValue(void 0)),g()};var t={switchRadioOff:"radioAllOff",switchOnText:"onText",switchOffText:"offText",switchOnColor:"onColor",switchOffColor:"offColor",switchAnimate:"animate",switchSize:"size",switchLabel:"labelText",switchIcon:"labelText",switchWrapper:"wrapperClass",switchHandleWidth:"handleWidth",switchLabelWidth:"labelWidth",switchInverse:"inverse",switchReadonly:"readonly"},n=function(t,e){return function(){a.$observe(t,function(){d(r,e[t],t)})}};for(var l in t)a.$observe(l,n(l,t))}(),n.$on("$destroy",function(){r.bootstrapSwitch("destroy")})}}}]).directive("bsSwitch",function(){return{restrict:"E",require:"ngModel",template:"<input bs-switch>",replace:!0}})}()},566:function(t,e,n){var r;r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}return n.m=t,n.c=e,n.p="/dist/",n(0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.nodeRenderers=e.treeTypes=e.Parser=e.Tooltip=e.Prerenderer=e.Branch=e.Tree=void 0;var r=u(n(1)),a=u(n(7)),i=u(n(11)),o=u(n(27)),s=u(n(29)),l=u(n(8)),h=u(n(26)),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2));function u(t){return t&&t.__esModule?t:{default:t}}function f(t,e,n){var r=t[e]?t:t.prototype,a=r[e];r[e]=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return n.call(this,a,e)}}e.Tree=r.default,e.Branch=a.default,e.Prerenderer=i.default,e.Tooltip=o.default,e.Parser=s.default,e.treeTypes=l.default,e.nodeRenderers=h.default,e.utils=c,e.default={plugin:function(t){t.call(this,f)},createTree:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new r.default(t,e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(2),i=h(n(7)),o=n(27),s=h(n(8)),l=h(n(28));function h(t){return t&&t.__esModule?t:{default:t}}var c=a.dom.addClass,u=a.dom.setCursorDrag,f=a.dom.setCursorDragging,d=a.events.fireEvent,p=a.events.addEvent,g=a.events.removeEvent,v=a.canvas.getPixelRatio,b=a.canvas.translateClick,m=a.constants.Predicates,y=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._point={x:0,y:0},this.containerElement="string"==typeof e?document.getElementById(e):e,c(this.containerElement,"pc-container"),this.branches={},this.leaves=[],this.root=!1,this.stringRepresentation="",this.backColour=!1,this.originalTree={},"static"===window.getComputedStyle(this.containerElement).position&&(this.containerElement.style.position="relative"),this.containerElement.style.boxSizing="border-box";var a=document.createElement("canvas");a.id=(this.containerElement.id||"")+"__canvas",a.className="phylocanvas",a.style.position="relative",a.height=e.offsetHeight||400,a.width=e.offsetWidth||400,a.style.zIndex="1",this.containerElement.appendChild(a),this.canvas=a.getContext("2d"),this.canvas.canvas.onselectstart=function(){return!1},this.canvas.fillStyle="#000000",this.canvas.strokeStyle="#000000",this.canvas.save(),this.collapsedColour="rgba(0, 0, 0, 0.5)",this.defaultCollapsed={},this.tooltip=new o.ChildNodesTooltip(this),this.drawn=!1,this.highlighters=[],this.zoom=1,this.zoomFactor=3,this.disableZoom=!1,this.fillCanvas=!1,this.branchScaling=!0,this.currentBranchScale=1,this.branchScalingStep=1.2,this.pickedup=!1,this.dragging=!1,this.startx=null,this.starty=null,this.baseNodeSize=1,this.origx=null,this.origy=null,this.offsetx=this.canvas.canvas.width/2,this.offsety=this.canvas.canvas.height/2,this.selectedColour="rgba(49,151,245,1)",this.highlightColour="rgba(49,151,245,1)",this.highlightWidth=4,this.highlightSize=2,this.branchColour="rgba(0,0,0,1)",this.branchScalar=1,this.padding=50,this.labelPadding=5,this.multiSelect=!0,this.clickFlag="selected",this.clickFlagPredicate=m.tautology,this.hoverLabel=!1,this.internalNodesSelectable=!0,this.showLabels=!0,this.showBranchLengthLabels=!1,this.branchLengthLabelPredicate=m.tautology,this.showInternalNodeLabels=!1,this.internalLabelStyle={colour:this.branchColour,textSize:this.textSize,font:this.font,format:""},this.setTreeType("radial"),this.maxBranchLength=0,this.lineWidth=1,this.textSize=7,this.font="sans-serif",this.unselectOnClickAway=!0,this.farthestNodeFromRootX=0,this.farthestNodeFromRootY=0,this.shiftKeyDrag=!1,this.maxLabelLength={},Object.assign(this,r),this.resizeToContainer(),this.eventListeners={};var i=Object.assign({click:{listener:this.clicked.bind(this)},mousedown:{listener:this.pickup.bind(this)},mouseup:{listener:this.drop.bind(this)},mouseout:{listener:this.drop.bind(this)},mousemove:{target:this.canvas.canvas,listener:this.drag.bind(this)},mousewheel:{target:this.canvas.canvas,listener:this.scroll.bind(this)},DOMMouseScroll:{target:this.canvas.canvas,listener:this.scroll.bind(this)},resize:{target:window,listener:function(){n.resizeToContainer(),n.draw()}}},r.eventListeners||{}),s=!0,l=!1,h=void 0;try{for(var u,f=Object.keys(i)[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var d=u.value,p=i[d],g=p.listener,v=p.target;this.addListener(d,g,v)}}catch(t){l=!0,h=t}finally{try{!s&&f.return&&f.return()}finally{if(l)throw h}}}return r(t,[{key:"removeEventListeners",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,a=Object.keys(this.eventListeners)[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var h,c=this.eventListeners[i][Symbol.iterator]();!(o=(h=c.next()).done);o=!0){var u=h.value,f=u.target,d=u.listener;g(f||this.containerElement,i,d)}}catch(t){s=!0,l=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw l}}}}catch(t){e=!0,n=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw n}}}},{key:"setInitialCollapsedBranches",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root;if((t=n.getChildProperties("id"))&&t.length>this.defaultCollapsed.min&&t.length<this.defaultCollapsed.max)n.collapsed=!0;else for(e=0;e<n.children.length;e++)this.setInitialCollapsedBranches(n.children[e])}},{key:"getNodeAtMousePosition",value:function(t){var e;return(e=this.root).clicked.apply(e,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(b(t,this)))}},{key:"getSelectedNodeIds",value:function(){return this.getNodeIdsWithFlag("selected")}},{key:"getNodeIdsWithFlag",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.leaves.reduce(function(n,r){return r[t]===e&&n.push(r.id),n},[])}},{key:"clicked",value:function(t){var e;if(0===t.button){var n=[];if(this.dragging)return void(this.dragging=!1);if(!this.root)return!1;e=this.getNodeAtMousePosition(t);var r=this.multiSelect&&(t.metaKey||t.ctrlKey);if(e&&e.interactive)if(r){if(e.leaf)e[this.clickFlag]=!e[this.clickFlag];else if(this.internalNodesSelectable){var a=e.getChildProperties(this.clickFlag).some(function(t){return!1===t});e.cascadeFlag(this.clickFlag,a,this.clickFlagPredicate)}n=this.getNodeIdsWithFlag(this.clickFlag),this.draw()}else this.root.cascadeFlag(this.clickFlag,!1,this.clickFlagPredicate),(this.internalNodesSelectable||e.leaf)&&(e.cascadeFlag(this.clickFlag,!0,this.clickFlagPredicate),n=e.getChildProperties("id")),this.draw();else!this.unselectOnClickAway||this.dragging||r||(this.root.cascadeFlag(this.clickFlag,!1,this.clickFlagPredicate),this.draw());this.pickedup||(this.dragging=!1),this.nodesUpdated(n,this.clickFlag)}}},{key:"drag",value:function(t){var e=v(this.canvas);if(!this.drawn)return!1;if(this.pickedup){var n=(t.clientX-this.startx)*e,r=(t.clientY-this.starty)*e;Math.abs(n)+Math.abs(r)>5&&(this.dragging=!0,this.offsetx=this.origx+n,this.offsety=this.origy+r,this.draw())}else{var a=t,i=this.getNodeAtMousePosition(a);i&&i.interactive&&(this.internalNodesSelectable||i.leaf)?(this.root.cascadeFlag("hovered",!1),i.hovered=!0,i.leaf||i.hasCollapsedAncestor()||this.tooltip.open(a.clientX,a.clientY,i),this.containerElement.style.cursor="pointer"):(this.tooltip.close(),this.root.cascadeFlag("hovered",!1),this.shiftKeyDrag&&a.shiftKey?u(this.containerElement):this.containerElement.style.cursor="auto"),this.draw()}}},{key:"draw",value:function(t){if(this.highlighters.length=0,0!==this.maxBranchLength){this.canvas.clearRect(0,0,this.canvas.canvas.width,this.canvas.canvas.height),this.canvas.lineCap="round",this.canvas.lineJoin="round",this.canvas.strokeStyle=this.branchColour,this.canvas.save(),this.drawn&&!t||(this.prerenderer.run(this),t||this.fitInPanel());var e=v(this.canvas);this.canvas.lineWidth=this.lineWidth/this.zoom,this.canvas.translate(this.offsetx*e,this.offsety*e),this.canvas.scale(this.zoom,this.zoom),this.branchRenderer.render(this,this.root),this.highlighters.forEach(function(t){return t()}),this.drawn=!0,this.canvas.restore()}else this.loadError(new Error("All branches in the tree are identical."))}},{key:"pickup",value:function(t){if(!this.shiftKeyDrag||t.shiftKey){if(!this.drawn)return!1;this.origx=this.offsetx,this.origy=this.offsety,0===t.button&&(this.pickedup=!0,f(this.containerElement)),this.startx=t.clientX,this.starty=t.clientY}}},{key:"drop",value:function(t){if(!this.drawn)return!1;this.pickedup=!1,this.shiftKeyDrag&&t.shiftKey?u(this.containerElement):this.containerElement.style.cursor="auto"}},{key:"scroll",value:function(t){if(!(this.disableZoom||"wheelDelta"in t&&0===t.wheelDelta)){t.preventDefault(),this._point.x=t.offsetX,this._point.y=t.offsetY;var e=t.detail<0||t.wheelDelta>0?1:-1;this.branchScaling&&(t.metaKey||t.ctrlKey)?(this.currentBranchScale*=Math.pow(this.branchScalingStep,e),this.setBranchScale(this.currentBranchScale,this._point)):this.smoothZoom(e,this._point)}}},{key:"findLeaves",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=[],r=!0,a=!1,i=void 0;try{for(var o,s=this.leaves[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;l[e]&&l[e].match(t)&&n.push(l)}}catch(t){a=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}},{key:"updateLeaves",value:function(t,e,n){var r=!0,a=!1,i=void 0;try{for(var o,s=this.leaves[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){o.value[e]=!n}}catch(t){a=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}var l=!0,h=!1,c=void 0;try{for(var u,f=t[Symbol.iterator]();!(l=(u=f.next()).done);l=!0){u.value[e]=n}}catch(t){h=!0,c=t}finally{try{!l&&f.return&&f.return()}finally{if(h)throw c}}this.nodesUpdated(t.map(function(t){return t.id}),e)}},{key:"clearSelect",value:function(){this.root.cascadeFlag("selected",!1),this.draw()}},{key:"getPngUrl",value:function(){return this.canvas.canvas.toDataURL()}},{key:"load",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e,r=arguments[2];if("function"==typeof e&&(r=e,n={}),r&&(n.callback=r),n.format)this.build(t,l.default[n.format],n);else{var a=!0,i=!1,o=void 0;try{for(var s,h=Object.keys(l.default)[Symbol.iterator]();!(a=(s=h.next()).done);a=!0){var c=s.value,u=l.default[c];if(t.match(u.fileExtension)||t.match(u.validator))return void this.build(t,u,n)}}catch(t){i=!0,o=t}finally{try{!a&&h.return&&h.return()}finally{if(i)throw o}}var f=new Error("String not recognised as a file or a parseable format string");r&&r(f),this.loadError(f)}}},{key:"saveOriginalTree",value:function(){this.originalTree.branches=this.branches,this.originalTree.leaves=this.leaves,this.originalTree.root=this.root,this.originalTree.branchLengths={},this.originalTree.parents={}}},{key:"clearState",value:function(){this.root=!1,this.leaves=[],this.branches={},this.drawn=!1}},{key:"extractNestedBranches",value:function(){this.branches={},this.leaves=[],this.storeNode(this.root),this.root.extractChildren()}},{key:"saveState",value:function(){this.extractNestedBranches(),this.root.branchLength=0,this.maxBranchLength=0,this.root.setTotalLength(),0!==this.maxBranchLength||this.loadError(new Error("All branches in the tree are identical."))}},{key:"build",value:function(t,e,n){var r=this;this.originalTree={},this.clearState(),i.default.lastId=0;var a=new i.default;a.id="root",this.branches.root=a,this.setRoot(a),e.parse({formatString:t,root:a,options:n},function(e){if(e)return n.callback&&n.callback(e),void r.loadError(e);r.stringRepresentation=t,r.saveState(),r.setInitialCollapsedBranches(),r.beforeFirstDraw(),r.draw(),r.saveOriginalTree(),n.callback&&n.callback(),r.loadCompleted()})}},{key:"redrawFromBranch",value:function(t){this.clearState(),this.resetTree(),this.originalTree.branchLengths[t.id]=t.branchLength,this.originalTree.parents[t.id]=t.parent,this.root=t,this.root.parent=!1,this.saveState(),this.draw(),this.subtreeDrawn(t.id)}},{key:"redrawOriginalTree",value:function(){this.load(this.stringRepresentation)}},{key:"storeNode",value:function(t){if(t.id&&""!==t.id||(t.id=i.default.generateId()),this.branches[t.id]&&t!==this.branches[t.id]){if(t.leaf)throw new Error("Two nodes on this tree share the id "+t.id);t.id=i.default.generateId()}this.branches[t.id]=t,t.leaf&&this.leaves.push(t)}},{key:"setNodeSize",value:function(t){this.baseNodeSize=Number(t),this.draw()}},{key:"setRoot",value:function(t){t.tree=this,this.root=t}},{key:"setTextSize",value:function(t){this.textSize=Number(t),this.draw()}},{key:"setFontSize",value:function(t){this.textSize=this.calculateFontSize?this.calculateFontSize(t):Math.min(t/2,15),this.canvas.font=this.textSize+"pt "+this.font}},{key:"setTreeType",value:function(t,e){if(!(t in s.default))return d(this.containerElement,"error",{error:new Error('"'+t+'" is not a known tree-type.')});var n=this.treeType;this.treeType=t,this.type=s.default[t],this.branchRenderer=s.default[t].branchRenderer,this.prerenderer=s.default[t].prerenderer,this.labelAlign=s.default[t].labelAlign,this.calculateFontSize=s.default[t].calculateFontSize,this.drawn&&(this.drawn=!1,this.draw()),e||this.treeTypeChanged(n,t)}},{key:"setSize",value:function(t,e){this.canvas.canvas.width=t,this.canvas.canvas.height=e,this.navigator&&this.navigator.resize(),this.adjustForPixelRatio()}},{key:"adjustForPixelRatio",value:function(){var t=v(this.canvas);this.canvas.canvas.style.height=this.canvas.canvas.height+"px",this.canvas.canvas.style.width=this.canvas.canvas.width+"px",t>1&&(this.canvas.canvas.width*=t,this.canvas.canvas.height*=t)}},{key:"getCentrePoint",value:function(){var t=v(this.canvas);return{x:this.canvas.canvas.width/2/t,y:this.canvas.canvas.height/2/t}}},{key:"setZoom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCentrePoint(),n=e.x,r=e.y;if(t>0){var a=this.zoom;this.zoom=t,this.offsetx=this.calculateZoomedOffset(this.offsetx,n,a,t),this.offsety=this.calculateZoomedOffset(this.offsety,r,a,t),this.draw()}}},{key:"smoothZoom",value:function(t,e){this.setZoom(Math.pow(10,Math.log(this.zoom)/Math.log(10)+t*this.zoomFactor*.01),e)}},{key:"calculateZoomedOffset",value:function(t,e,n,r){return-1*((-1*t+e)/n*r-e)}},{key:"setBranchScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:this.canvas.canvas.width/2,y:this.canvas.canvas.height/2},n=s.default[this.treeType];if(n.branchScalingAxis&&!(t<0)){var r=this.branchScalar;this.branchScalar=this.initialBranchScalar*t;var a=this.branchScalar/r,i=this["offset"+n.branchScalingAxis],o=e[n.branchScalingAxis],l=(e[n.branchScalingAxis]-i)*a+i;this["offset"+n.branchScalingAxis]+=o-l,this.draw()}}},{key:"toggleLabels",value:function(){this.showLabels=!this.showLabels,this.draw()}},{key:"setMaxLabelLength",value:function(){var t;void 0===this.maxLabelLength[this.treeType]&&(this.maxLabelLength[this.treeType]=0);for(var e=0;e<this.leaves.length;e++)(t=this.canvas.measureText(this.leaves[e].id)).width>this.maxLabelLength[this.treeType]&&(this.maxLabelLength[this.treeType]=t.width)}},{key:"loadStarted",value:function(){d(this.containerElement,"loading")}},{key:"beforeFirstDraw",value:function(){d(this.containerElement,"beforeFirstDraw")}},{key:"loadCompleted",value:function(){d(this.containerElement,"loaded")}},{key:"loadError",value:function(t){d(this.containerElement,"error",{error:t})}},{key:"subtreeDrawn",value:function(t){d(this.containerElement,"subtree",{node:t})}},{key:"nodesUpdated",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];d(this.containerElement,"updated",{nodeIds:t,property:e,append:n})}},{key:"treeTypeChanged",value:function(t,e){d(this.containerElement,"typechanged",{oldType:t,newType:e})}},{key:"addListener",value:function(t,e,n){this.eventListeners[t]||(this.eventListeners[t]=[]),this.eventListeners[t].push({listener:e,target:n}),p(n||this.containerElement,t,e)}},{key:"removeListener",value:function(t,e,n){g(n||this.containerElement,t,e)}},{key:"getBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.leaves,e=t===this.leaves?this.root:t[0],n=e.startx,r=e.startx,a=e.starty,i=e.starty,o=!0,s=!1,l=void 0;try{for(var h,c=t[Symbol.iterator]();!(o=(h=c.next()).done);o=!0){var u=h.value.getBounds();n=Math.min(n,u.minx),r=Math.max(r,u.maxx),a=Math.min(a,u.miny),i=Math.max(i,u.maxy)}}catch(t){s=!0,l=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw l}}return[[n,a],[r,i]]}},{key:"fitInPanel",value:function(t){this.zoom=1;var e=this.getBounds(t),n=[this.canvas.canvas.width-2*this.padding,this.canvas.canvas.height-2*this.padding],r=[e[1][0]-e[0][0],e[1][1]-e[0][1]],a=v(this.canvas),i=n[0]/r[0],o=n[1]/r[1];this.zoom=Math.min(i,o),this.offsetx=-1*e[0][0]*this.zoom,this.offsety=-1*e[0][1]*this.zoom,i>o?(this.offsetx+=this.padding+(n[0]-r[0]*this.zoom)/2,this.offsety+=this.padding):(this.offsetx+=this.padding,this.offsety+=this.padding+(n[1]-r[1]*this.zoom)/2),this.offsetx=this.offsetx/a,this.offsety=this.offsety/a}},{key:"resetTree",value:function(){if(this.originalTree.branches){this.branches=this.originalTree.branches;var t=!0,e=!1,n=void 0;try{for(var r,a=Object.keys(this.originalTree.branchLengths)[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var i=r.value;this.branches[i].branchLength=this.originalTree.branchLengths[i],this.branches[i].parent=this.originalTree.parents[i]}}catch(t){e=!0,n=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw n}}this.leaves=this.originalTree.leaves,this.root=this.originalTree.root}}},{key:"rotateBranch",value:function(t){this.branches[t.id].rotate()}},{key:"exportNwk",value:function(){var t=this.root.getNwk();return t.substr(0,t.lastIndexOf(")")+1)+";"}},{key:"resizeToContainer",value:function(){this.setSize(this.containerElement.offsetWidth,this.containerElement.offsetHeight)}},{key:"cleanup",value:function(){this.removeEventListeners()}},{key:"alignLabels",get:function(){return this.showLabels&&this.labelAlign&&this.labelAlignEnabled},set:function(t){this.labelAlignEnabled=t}}]),t}();y.prototype.on=y.prototype.addListener,y.prototype.off=y.prototype.removeListener,e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.events=e.dom=e.constants=e.canvas=void 0;var r=s(n(3)),a=s(n(6)),i=s(n(4)),o=s(n(5));function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}e.canvas=r,e.constants=a,e.dom=i,e.events=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBackingStorePixelRatio=r,e.getPixelRatio=a,e.translateClick=function(t,e){var n=a(e.canvas);return[(t.offsetX-e.offsetx)/e.zoom*n,(t.offsetY-e.offsety)/e.zoom*n]},e.translatePoint=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},e=t.x,n=t.y,r=arguments[1],i=a(r.canvas);return{x:(e-r.offsetx)/r.zoom*i,y:(n-r.offsety)/r.zoom*i}},e.undoPointTranslation=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},e=t.x,n=t.y,r=arguments[1],i=a(r.canvas);return{x:e/i*r.zoom+r.offsetx,y:n/i*r.zoom+r.offsety}};n(4);function r(t){return t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||1}function a(t){return(window.devicePixelRatio||1)/r(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createBlobUrl=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text/plain;charset=utf-8",n=new Blob([t],{type:e});return a.createObjectURL(n)},e.setupDownloadLink=function(t,e){var n=document.createElement("a"),i=void 0!==n.download;n.href=t,n.target="_blank",i&&(n.download=e);(0,r.fireEvent)(n,"click"),i&&a.revokeObjectURL(n.href)},e.getX=function(t){var e=0;for(;t;)e+=t.offsetLeft,t=t.offsetParent;return e},e.getY=function(t){var e=0;for(;t;)e+=t.offsetTop,t=t.offsetParent;return e},e.addClass=function(t,e){var n=t.className.split(" ");-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" "))},e.removeClass=function(t,e){var n=t.className.split(" "),r=n.indexOf(e);-1!==r&&(n.splice(r,1),t.className=n.join(" "))},e.hasClass=function(t,e){return-1!==t.className.split(" ").indexOf(e)},e.setCursorDragging=function(t){t.style.cursor="-webkit-grabbing",t.style.cursor="-moz-grabbing",t.style.cursor="grabbing"},e.setCursorDrag=function(t){t.style.cursor="-webkit-grab",t.style.cursor="-moz-grab",t.style.cursor="grab"};var r=n(5),a=window.URL||window.webkitURL},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.preventDefault=function(t){return t.preventDefault(),!1},e.fireEvent=function(t,e){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};document.createEvent?(n=document.createEvent("HTMLEvents")).initEvent(e,!0,!0):(n=document.createEventObject()).eventType=e;for(r in n.eventName=e,a)a.hasOwnProperty(r)&&(n[r]=a[r]);document.createEvent?t.dispatchEvent(n):t.fireEvent("on"+n.eventType,n)},e.addEvent=function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,function(){return n.call(t,window.event)})},e.removeEvent=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):console.warn("[Phylocanvas] Unable to remove event, removeEventListener not supported")},e.killEvent=function(t){t.stopPropagation(),t.preventDefault()},e.createHandler=function(t,e){var r;r=(void 0===e?"undefined":n(e))===n("aaa")?function(n){if(t[e])return t[e](n)}:function(){return e(t)};return r}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Angles={FORTYFIVE:Math.PI/4,QUARTER:Math.PI/2,HALF:Math.PI,FULL:2*Math.PI},e.Shapes={x:"star",s:"square",o:"circle",t:"triangle"},e.Predicates={tautology:function(){return!0},contradiction:function(){return!1},leafOnly:function(t){return t.leaf},nonLeaf:function(t){return!t.leaf}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(2),i=s(n(8)),o=s(n(26));function s(t){return t&&t.__esModule?t:{default:t}}var l=a.constants.Angles,h=a.constants.Shapes,c={minx:0,maxx:0,miny:0,maxy:0},u={lineWidth:null,strokeStyle:null,fillStyle:null},f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.angle=0,this.branchLength=0,this.centerx=0,this.centery=0,this.children=[],this.collapsed=!1,this.colour=null,this.data={},this.highlighted=!1,this.hovered=!1,this.id="",this.label=null,this.leaf=!0,this.maxChildAngle=0,this.minChildAngle=l.FULL,this.nodeShape="circle",this.parent=null,this.radius=1,this.selected=!1,this.startx=0,this.starty=0,this.totalBranchLength=0,this.tree=null,this.pruned=!1,this.labelStyle={},this.internalLabelStyle=null,this.interactive=!0,this.leafStyle={},this.minx=0,this.miny=0,this.maxx=0,this.maxy=0}return r(t,[{key:"clicked",value:function(t,e){if(this.dragging||this.hasCollapsedAncestor())return null;if(t<this.maxx&&t>this.minx&&e<this.maxy&&e>this.miny)return this;for(var n=this.children.length-1;n>=0;n--){var r=this.children[n].clicked(t,e);if(r)return r}}},{key:"drawLabel",value:function(){var t=this.getTextSize(),e=this.getLabel();this.canvas.font=this.getFontString(),this.labelWidth=this.canvas.measureText(e).width,void 0===this.tree.maxLabelLength[this.tree.treeType]&&(this.tree.maxLabelLength[this.tree.treeType]=0),this.labelWidth>this.tree.maxLabelLength[this.tree.treeType]&&(this.tree.maxLabelLength[this.tree.treeType]=this.labelWidth);var n=this.getLabelStartX();this.tree.alignLabels&&(n+=Math.abs(this.tree.labelAlign.getLabelOffset(this))),this.angle>l.QUARTER&&this.angle<l.HALF+l.QUARTER&&(this.canvas.rotate(l.HALF),n=-n-1*this.labelWidth),this.canvas.beginPath(),this.canvas.fillStyle=this.getTextColour(),this.canvas.fillText(e,n,t/2),this.canvas.closePath(),this.angle>l.QUARTER&&this.angle<l.HALF+l.QUARTER&&this.canvas.rotate(l.HALF)}},{key:"setNodeDimensions",value:function(t,e,n){var r=n;(n*this.tree.zoom<5||!this.leaf)&&(r=5/this.tree.zoom),this.minx=t-r,this.maxx=t+r,this.miny=e-r,this.maxy=e+r}},{key:"getNumberOfLeaves",value:function(){for(var t=0,e=[this];e.length;){var n=e.pop();if(n.leaf)t++;else{var r=!0,a=!1,i=void 0;try{for(var o,s=n.children[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;e.push(l)}}catch(t){a=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}}}return t}},{key:"drawCollapsed",value:function(t,e){var n=i.default[this.tree.treeType].getCollapsedMeasurements;this.canvas.beginPath();var r=n(this),a=r.angle,o=r.radius,s=this.angle-a/2,l=this.angle+a/2;this.canvas.moveTo(t,e),this.canvas.arc(t,e,o,s,l,!1);var h=this.canvas.createRadialGradient(t,e,o,t,e,.2*o);h.addColorStop(0,"rgba(255, 255, 255, 0)"),h.addColorStop(1,this.tree.collapsedColour||this.getColour()),this.canvas.fillStyle=h,this.canvas.fill(),this.canvas.closePath()}},{key:"drawLabelConnector",value:function(){var t=this.tree,e=t.highlightColour,n=t.labelAlign;this.canvas.save(),this.canvas.lineWidth=this.canvas.lineWidth/4,this.canvas.strokeStyle=this.isHighlighted?e:this.getColour(),this.canvas.beginPath(),this.canvas.moveTo(this.getRadius(),0),this.canvas.lineTo(n.getLabelOffset(this)+this.getDiameter(),0),this.canvas.stroke(),this.canvas.closePath(),this.canvas.restore()}},{key:"drawLeaf",value:function(){var t=this.tree,e=t.alignLabels,n=t.canvas;e&&this.drawLabelConnector(),n.save(),o.default[this.nodeShape](n,this.getRadius(),this.getLeafStyle()),n.restore(),(this.tree.showLabels||this.tree.hoverLabel&&this.isHighlighted)&&this.drawLabel()}},{key:"drawHighlight",value:function(t,e){this.canvas.save(),this.canvas.beginPath(),this.canvas.strokeStyle=this.tree.highlightColour,this.canvas.lineWidth=this.getHighlightLineWidth();var n=this.getHighlightRadius();this.canvas.arc(t,e,n,0,l.FULL,!1),this.canvas.stroke(),this.canvas.closePath(),this.canvas.restore()}},{key:"drawBranchLabels",value:function(){this.canvas.save();var t=this.internalLabelStyle||this.tree.internalLabelStyle;this.canvas.fillStyle=t.colour,this.canvas.font=t.format+" "+t.textSize+"pt "+t.font,this.canvas.textBaseline="middle",this.canvas.textAlign="center";var e=2*this.canvas.measureText("M").width/3,n="y"===this.tree.type.branchScalingAxis?this.centerx:(this.startx+this.centerx)/2,r="x"===this.tree.type.branchScalingAxis?this.centery:(this.starty+this.centery)/2;this.tree.showBranchLengthLabels&&this.tree.branchLengthLabelPredicate(this)&&this.canvas.fillText(this.branchLength.toFixed(2),n,r+e),this.tree.showInternalNodeLabels&&!this.leaf&&this.label&&this.canvas.fillText(this.label,n,r-e),this.canvas.restore()}},{key:"drawNode",value:function(){var t=this.getRadius(),e=t,n=this.leaf?e*Math.cos(this.angle)+this.centerx:this.centerx,r=this.leaf?e*Math.sin(this.angle)+this.centery:this.centery;this.setNodeDimensions(n,r,t),this.collapsed?this.drawCollapsed(n,r):this.leaf&&(this.canvas.save(),this.canvas.translate(this.centerx,this.centery),this.canvas.rotate(this.angle),this.drawLeaf(),this.canvas.restore()),this.isHighlighted&&this.tree.highlighters.push(this.drawHighlight.bind(this,n,r)),(this.tree.root!==this&&this.tree.showBranchLengthLabels||this.tree.showInternalNodeLabels)&&this.drawBranchLabels()}},{key:"getChildProperties",value:function(t){if(this.leaf)return[this[t]];for(var e=[],n=0;n<this.children.length;n++)e=e.concat(this.children[n].getChildProperties(t));return e}},{key:"getChildCount",value:function(){if(this.leaf)return 1;for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].getChildCount();return t}},{key:"getChildYTotal",value:function(){if(this.leaf)return this.centery;for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].getChildYTotal();return t}},{key:"cascadeFlag",value:function(t,e,n){if(void 0===this[t])throw new Error("Unknown property: "+t);(void 0===n||n(this,t,e))&&(this[t]=e);var r=!0,a=!1,i=void 0;try{for(var o,s=this.children[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){o.value.cascadeFlag(t,e,n)}}catch(t){a=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}}},{key:"reset",value:function(){var t;for(this.startx=0,this.starty=0,this.centerx=0,this.centery=0,this.angle=null,this.minChildAngle=l.FULL,this.maxChildAngle=0,t=0;t<this.children.length;t++)try{this.children[void 0].reset()}catch(t){return t}}},{key:"redrawTreeFromBranch",value:function(){this.collapsed&&this.expand(),this.tree.redrawFromBranch(this)}},{key:"extractChildren",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,a=this.children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var i=r.value;this.tree.storeNode(i),i.extractChildren()}}catch(t){e=!0,n=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw n}}}},{key:"hasCollapsedAncestor",value:function(){return!!this.parent&&(this.parent.collapsed||this.parent.hasCollapsedAncestor())}},{key:"collapse",value:function(){this.collapsed=!1===this.leaf}},{key:"expand",value:function(){this.collapsed=!1}},{key:"toggleCollapsed",value:function(){this.collapsed?this.expand():this.collapse()}},{key:"setTotalLength",value:function(){var t;for(this.parent?(this.totalBranchLength=this.parent.totalBranchLength+this.branchLength,this.totalBranchLength>this.tree.maxBranchLength&&(this.tree.maxBranchLength=this.totalBranchLength)):(this.totalBranchLength=this.branchLength,this.tree.maxBranchLength=this.totalBranchLength),t=0;t<this.children.length;t++)this.children[t].setTotalLength()}},{key:"addChild",value:function(t){t.parent=this,t.tree=this.tree,this.leaf=!1,this.children.push(t)}},{key:"getChildColours",value:function(){var t=[];return this.children.forEach(function(e){var n=0===e.children.length?e.colour:e.getColour();-1===t.indexOf(n)&&t.push(n)}),t}},{key:"getColour",value:function(t){return this.selected?this.tree.selectedColour:t||this.colour||this.tree.branchColour}},{key:"getNwk",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.leaf?this.label+":"+this.branchLength:"("+this.children.map(function(t){return t.getNwk(!1)}).join(",")+"):"+this.branchLength+(t?";":"")}},{key:"getTextColour",value:function(){if(this.selected)return this.tree.selectedColour;if(this.isHighlighted)return this.tree.highlightColour;if(this.tree.backColour&&this.children.length){var t=this.getChildColours();if(1===t.length)return t[0]}return this.labelStyle.colour||this.colour||this.tree.branchColour}},{key:"getLabel",value:function(){return void 0!==this.label&&null!==this.label?this.label:""}},{key:"getTextSize",value:function(){return this.labelStyle.textSize||this.tree.textSize}},{key:"getFontString",value:function(){var t=this.labelStyle.font||this.tree.font;return(this.labelStyle.format||"")+" "+this.getTextSize()+"pt "+t}},{key:"getLabelSize",value:function(){return this.canvas.font=this.getFontString(),this.canvas.measureText(this.getLabel()).width}},{key:"getRadius",value:function(){var t=this.tree.baseNodeSize;return this.leaf?t*this.radius:t/this.radius}},{key:"getDiameter",value:function(){return 2*this.getRadius()}},{key:"hasLabelConnector",value:function(){return!!this.tree.alignLabels&&this.tree.labelAlign.getLabelOffset(this)>this.getDiameter()}},{key:"getLabelStartX",value:function(){this.getLeafStyle().lineWidth;var t=this.hasLabelConnector(),e=this.getDiameter();return this.isHighlighted&&!t&&(e+=this.getHighlightSize()-this.getRadius()),e+Math.min(this.tree.labelPadding,this.tree.labelPadding/this.tree.zoom)}},{key:"getHighlightLineWidth",value:function(){return this.tree.highlightWidth/this.tree.zoom}},{key:"getHighlightRadius",value:function(){var t=this.getHighlightLineWidth()*this.tree.highlightSize;return t+=this.getLeafStyle().lineWidth/this.tree.highlightSize,this.leaf?this.getRadius()+t:.666*t}},{key:"getHighlightSize",value:function(){return this.getHighlightRadius()+this.getHighlightLineWidth()}},{key:"rotate",value:function(){for(var t=[],e=this.children.length;e--;)t.push(this.children[e]);this.children=t,this.tree.extractNestedBranches(),this.tree.draw(!0)}},{key:"getChildNo",value:function(){return this.parent.children.indexOf(this)}},{key:"setDisplay",value:function(t){var e=t.colour,n=t.shape,r=t.size,a=t.leafStyle,i=t.labelStyle;e&&(this.colour=e),n&&(this.nodeShape=h[n]?h[n]:n),r&&(this.radius=r),a&&(this.leafStyle=a),i&&(this.labelStyle=i)}},{key:"getTotalLength",value:function(){var t=this.getRadius();return(this.tree.showLabels||this.tree.hoverLabel&&this.isHighlighted)&&(t+=this.getLabelStartX()+this.getLabelSize()),t}},{key:"getBounds",value:function(){var t=this.tree,e=t.alignLabels?t.labelAlign.getX(this):this.centerx,n=t.alignLabels?t.labelAlign.getY(this):this.centery,r=this.getRadius(),a=this.getTotalLength(),i=void 0,o=void 0,s=void 0,h=void 0;this.angle>l.QUARTER&&this.angle<l.HALF+l.QUARTER?(i=e+a*Math.cos(this.angle),s=n+a*Math.sin(this.angle),o=e-r,h=n-r):(i=e-r,s=n-r,o=e+a*Math.cos(this.angle),h=n+a*Math.sin(this.angle));var u=t.prerenderer.getStep(t)/2;return c.minx=Math.min(i,o,e-u),c.miny=Math.min(s,h,n-u),c.maxx=Math.max(i,o,e+u),c.maxy=Math.max(s,h,n+u),c}},{key:"getLeafStyle",value:function(){var t=this.leafStyle,e=t.strokeStyle,n=t.fillStyle,r=this.tree.zoom;u.strokeStyle=this.getColour(e),u.fillStyle=this.getColour(n);var a=void 0!==this.leafStyle.lineWidth?this.leafStyle.lineWidth:this.tree.lineWidth;return u.lineWidth=a/r,u}},{key:"isHighlighted",get:function(){return this.highlighted||this.hovered}},{key:"canvas",get:function(){return this.tree.canvas}}],[{key:"generateId",value:function(){return"pcn"+this.lastId++}}]),t}();f.lastId=0,e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=l(n(9)),a=l(n(14)),i=l(n(17)),o=l(n(20)),s=l(n(23));function l(t){return t&&t.__esModule?t:{default:t}}e.default={rectangular:r.default,circular:a.default,radial:i.default,diagonal:o.default,hierarchical:s.default}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=l(n(10)),a=l(n(11)),i=l(n(12)),o=l(n(13)),s=n(6);function l(t){return t&&t.__esModule?t:{default:t}}e.default={branchRenderer:new r.default(i.default),prerenderer:new a.default(o.default),labelAlign:{getX:function(t){return t.tree.farthestNodeFromRootX*t.tree.currentBranchScale},getY:function(t){return t.centery},getLabelOffset:function(t){return t.tree.farthestNodeFromRootX*t.tree.currentBranchScale-t.centerx}},branchScalingAxis:"x",getCollapsedMeasurements:function(t){return{angle:s.Angles.QUARTER,radius:t.tree.step*t.getNumberOfLeaves()}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var r=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!e.draw)throw new Error("`draw` function is required for branch renderers");this.draw=e.draw,this.prepareChild=e.prepareChild}return n(t,[{key:"render",value:function(t,e,n){var r;if(!n&&e&&(e.selected?e.canvas.fillStyle=t.selectedColour:e.canvas.fillStyle=e.colour,e.canvas.strokeStyle=e.getColour(),this.draw(t,e),!e.pruned))for(e.drawNode(),r=0;r<e.children.length;r++)this.prepareChild&&this.prepareChild(e,e.children[r]),this.render(t,e.children[r],e.collapsed||n)}}]),t}();e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.getStep=e.getStep,this.calculate=e.calculate}return n(t,[{key:"run",value:function(t){var e=this.getStep(t);t.root.startx=0,t.root.starty=0,t.root.centerx=0,t.root.centery=0,t.farthestNodeFromRootX=0,t.farthestNodeFromRootY=0,t.currentBranchScale=1,t.step=e,this.calculate(t,e),t.initialBranchScalar=t.branchScalar,t.root.startx=t.root.centerx,t.root.starty=t.root.centery,t.setFontSize(e),t.setMaxLabelLength()}}]),t}();e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={draw:function(t,e){var n=e.branchLength*t.branchScalar;e.angle=0,e.parent&&(e.centerx=e.startx+n),e.canvas.beginPath(),e.canvas.moveTo(e.startx,e.starty),e.canvas.lineTo(e.startx,e.centery),e.canvas.lineTo(e.centerx,e.centery),e.canvas.stroke(),e.canvas.closePath()},prepareChild:function(t,e){e.startx=t.centerx,e.starty=t.centery}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={getStep:function(t){return t.fillCanvas?t.canvas.canvas.height/t.leaves.length:Math.max(t.canvas.canvas.height/t.leaves.length,t.leaves[0].getDiameter()+t.labelPadding)},calculate:function(t,e){t.branchScalar=t.canvas.canvas.width/t.maxBranchLength;for(var n=0;n<t.leaves.length;n++){t.leaves[n].angle=0,t.leaves[n].centery=n>0?t.leaves[n-1].centery+e:0,t.leaves[n].centerx=t.leaves[n].totalBranchLength*t.branchScalar,t.leaves[n].centerx>t.farthestNodeFromRootX&&(t.farthestNodeFromRootX=t.leaves[n].centerx),t.leaves[n].centery>t.farthestNodeFromRootY&&(t.farthestNodeFromRootY=t.leaves[n].centery);for(var r=t.leaves[n];r.parent;r=r.parent){var a=r.parent.children;r.parent.centery=(a[0].centery+a[a.length-1].centery)/2}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(n(10)),a=s(n(11)),i=s(n(15)),o=s(n(16));function s(t){return t&&t.__esModule?t:{default:t}}var l={getX:function(t){return t.centerx+t.labelOffsetX+t.getDiameter()*Math.cos(t.angle)},getY:function(t){return t.centery+t.labelOffsetY+t.getDiameter()*Math.sin(t.angle)},getLabelOffset:function(t){return t.labelOffsetX/Math.cos(t.angle)}};e.default={branchRenderer:new r.default(i.default),prerenderer:new a.default(o.default),labelAlign:l,getCollapsedMeasurements:function(t){var e=t.tree,n=e.maxBranchLength,r=e.branchScalar,a=e.step;return{angle:t.getNumberOfLeaves()*a,radius:(n-t.totalBranchLength)*r}},calculateFontSize:function(t){return Math.min(10*t+4,40)}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={draw:function(t,e){var n=e.totalBranchLength*t.branchScalar;e.canvas.beginPath(),e.canvas.moveTo(e.startx,e.starty),e.canvas.lineTo(e.centerx,e.centery),e.canvas.stroke(),e.canvas.closePath(),e.canvas.strokeStyle=e.getColour(),e.children.length>1&&!e.collapsed&&(e.canvas.beginPath(),e.canvas.arc(0,0,n,e.minChildAngle,e.maxChildAngle,e.maxChildAngle<e.minChildAngle),e.canvas.stroke(),e.canvas.closePath())}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2).constants.Angles;e.default={getStep:function(t){return r.FULL/t.leaves.length},calculate:function(t,e){t.branchScalar=Math.min(t.canvas.canvas.width,t.canvas.canvas.height)/t.maxBranchLength;var n=t.leaves.length*t.leaves[0].getDiameter()/r.FULL;t.branchScalar*t.maxBranchLength>n?n=t.branchScalar*t.maxBranchLength:t.branchScalar=n/t.maxBranchLength;for(var a=0;a<t.leaves.length;a++){var i=t.leaves[a];for(i.angle=e*a,i.startx=i.parent.totalBranchLength*t.branchScalar*Math.cos(i.angle),i.starty=i.parent.totalBranchLength*t.branchScalar*Math.sin(i.angle),i.centerx=i.totalBranchLength*t.branchScalar*Math.cos(i.angle),i.centery=i.totalBranchLength*t.branchScalar*Math.sin(i.angle),i.labelOffsetX=n*Math.cos(i.angle)-i.centerx,i.labelOffsetY=n*Math.sin(i.angle)-i.centery;i.parent&&(0===i.getChildNo()&&(i.parent.angle=i.angle,i.parent.minChildAngle=i.angle),i.getChildNo()===i.parent.children.length-1);i=i.parent)i.parent.maxChildAngle=i.angle,i.parent.angle=(i.parent.minChildAngle+i.parent.maxChildAngle)/2,i.parent.startx=(i.parent.totalBranchLength-i.parent.branchLength)*t.branchScalar*Math.cos(i.parent.angle),i.parent.starty=(i.parent.totalBranchLength-i.parent.branchLength)*t.branchScalar*Math.sin(i.parent.angle),i.parent.centerx=i.parent.totalBranchLength*t.branchScalar*Math.cos(i.parent.angle),i.parent.centery=i.parent.totalBranchLength*t.branchScalar*Math.sin(i.parent.angle)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(n(10)),a=s(n(11)),i=s(n(18)),o=s(n(19));function s(t){return t&&t.__esModule?t:{default:t}}e.default={branchRenderer:new r.default(i.default),prerenderer:new a.default(o.default),getCollapsedMeasurements:function(t){var e=t.tree,n=e.maxBranchLength,r=e.branchScalar,a=e.step;return{angle:t.getNumberOfLeaves()*a,radius:(n-t.totalBranchLength)*r}},calculateFontSize:function(t){return Math.min(50*t+5,15)}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={draw:function(t,e){e.canvas.beginPath(),e.canvas.moveTo(e.startx,e.starty),e.canvas.lineTo(e.centerx,e.centery),e.canvas.stroke(),e.canvas.closePath()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2).constants.Angles;e.default={getStep:function(t){return r.FULL/t.leaves.length},calculate:function(t,e){t.branchScalar=Math.min(t.canvas.canvas.width,t.canvas.canvas.height)/t.maxBranchLength;for(var n=0;n<t.leaves.length;n+=1){t.leaves[n].angle=e*n,t.leaves[n].centerx=t.leaves[n].totalBranchLength*t.branchScalar*Math.cos(t.leaves[n].angle),t.leaves[n].centery=t.leaves[n].totalBranchLength*t.branchScalar*Math.sin(t.leaves[n].angle);for(var r=t.leaves[n];r.parent&&(0===r.getChildNo()&&(r.parent.angle=0),r.parent.angle+=r.angle*r.getChildCount(),r.getChildNo()===r.parent.children.length-1);r=r.parent)r.parent.angle=r.parent.angle/r.parent.getChildCount()}!function t(e,n){n.parent?(n.startx=n.parent.centerx,n.starty=n.parent.centery):(n.startx=0,n.starty=0),n.centerx=n.startx+n.branchLength*e.branchScalar*Math.cos(n.angle),n.centery=n.starty+n.branchLength*e.branchScalar*Math.sin(n.angle);for(var r=0;r<n.children.length;r++)t(e,n.children[r])}(t,t.root)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=l(n(10)),a=l(n(11)),i=l(n(21)),o=l(n(22)),s=n(6);function l(t){return t&&t.__esModule?t:{default:t}}e.default={branchRenderer:new r.default(i.default),prerenderer:new a.default(o.default),calculateFontSize:function(t){return Math.min(t/2,10)},getCollapsedMeasurements:function(t){return{angle:s.Angles.QUARTER,radius:t.tree.step*t.getNumberOfLeaves()}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={draw:function(t,e){e.angle=0,e.canvas.beginPath(),e.canvas.moveTo(e.startx,e.starty),e.canvas.lineTo(e.centerx,e.centery),e.canvas.stroke(),e.canvas.closePath()},prepareChild:function(t,e){e.startx=t.centerx,e.starty=t.centery}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2).constants.Angles;e.default={getStep:function(t){return Math.max(t.canvas.canvas.height/t.leaves.length,t.leaves[0].getDiameter()+t.labelPadding)},calculate:function(t,e){for(var n=0;n<t.leaves.length;n++){t.leaves[n].centerx=0,t.leaves[n].centery=n>0?t.leaves[n-1].centery+e:0,t.leaves[n].angle=0;for(var a=t.leaves[n];a.parent&&a.getChildNo()===a.parent.children.length-1;a=a.parent){a.parent.centery=a.parent.getChildYTotal()/a.parent.getChildCount(),a.parent.centerx=a.parent.children[0].centerx+(a.parent.children[0].centery-a.parent.centery)*Math.tan(r.FORTYFIVE);for(var i=0;i<a.parent.children.length;i++)a.parent.children[i].startx=a.parent.centerx,a.parent.children[i].starty=a.parent.centery}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=l(n(10)),a=l(n(11)),i=l(n(24)),o=l(n(25)),s=n(6);function l(t){return t&&t.__esModule?t:{default:t}}e.default={branchRenderer:new r.default(i.default),prerenderer:new a.default(o.default),labelAlign:{getX:function(t){return t.centerx},getY:function(t){return t.tree.farthestNodeFromRootY*t.tree.currentBranchScale},getLabelOffset:function(t){return t.tree.farthestNodeFromRootY*t.tree.currentBranchScale-t.centery}},branchScalingAxis:"y",getCollapsedMeasurements:function(t){return{angle:s.Angles.QUARTER,radius:t.tree.step*t.getNumberOfLeaves()}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={draw:function(t,e){var n=e.branchLength*t.branchScalar;e.parent&&(e.centery=e.starty+n),e.canvas.beginPath(),e!==e.tree.root&&(e.canvas.moveTo(e.startx,e.starty),e.canvas.lineTo(e.centerx,e.starty)),e.canvas.lineTo(e.centerx,e.centery),e.canvas.stroke(),e.canvas.closePath()},prepareChild:function(t,e){e.startx=t.centerx,e.starty=t.centery}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2).constants.Angles;e.default={getStep:function(t){return t.fillCanvas?t.canvas.canvas.width/t.leaves.length:Math.max(t.canvas.canvas.width/t.leaves.length,t.leaves[0].getDiameter()+t.labelPadding)},calculate:function(t,e){t.branchScalar=t.canvas.canvas.height/t.maxBranchLength;for(var n=0;n<t.leaves.length;n++){t.leaves[n].angle=r.QUARTER,t.leaves[n].centerx=n>0?t.leaves[n-1].centerx+e:0,t.leaves[n].centery=t.leaves[n].totalBranchLength*t.branchScalar;for(var a=t.leaves[n];a.parent&&(0===a.getChildNo()&&(a.parent.centerx=a.centerx),a.getChildNo()===a.parent.children.length-1);a=a.parent){a.parent.angle=r.QUARTER,a.parent.centerx=(a.parent.centerx+a.centerx)/2,a.parent.centery=a.parent.totalBranchLength*t.branchScalar;for(var i=0;i<a.parent.children.length;i++)a.parent.children[i].startx=a.parent.centerx,a.parent.children[i].starty=a.parent.centery}t.leaves[n].centerx>t.farthestNodeFromRootX&&(t.farthestNodeFromRootX=t.leaves[n].centerx),t.leaves[n].centery>t.farthestNodeFromRootY&&(t.farthestNodeFromRootY=t.leaves[n].centery)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2).constants.Angles;function a(t,e){t.beginPath(),t.moveTo(0,0),t.lineTo(e,0),t.stroke(),t.closePath()}function i(t,e){var n=e.lineWidth,r=e.strokeStyle,a=e.fillStyle;t.lineWidth=n,t.strokeStyle=r,t.fillStyle=a,t.fill(),n>0&&r!==a&&t.stroke()}var o=function(t){return t*Math.sqrt(2)};e.default={circle:function(t,e,n){var s=Math.pow(o(e),2),l=Math.sqrt(s/Math.PI);a(t,e-l),t.beginPath(),t.arc(e,0,l,0,r.FULL,!1),t.closePath(),i(t,n)},square:function(t,e,n){var r=o(e),s=e-r/2;a(t,s),t.beginPath(),t.moveTo(s,0),t.lineTo(s,r/2),t.lineTo(s+r,r/2),t.lineTo(s+r,-r/2),t.lineTo(s,-r/2),t.lineTo(s,0),t.closePath(),i(t,n)},star:function(t,e,n){var r=e,o=e,s=.5*o,l=Math.PI/5;a(t,o-s);var h=Math.PI/2*3;t.beginPath(),t.moveTo(r,0-o);for(var c=0;c<5;c++){var u=r+Math.cos(h)*o,f=0+Math.sin(h)*o;t.lineTo(u,f),h+=l,u=r+Math.cos(h)*s,f=0+Math.sin(h)*s,t.lineTo(u,f),h+=l}t.lineTo(r,0-o),t.closePath(),i(t,n)},triangle:function(t,e,n){var r=2*e*Math.cos(30*Math.PI/180),o=Math.sqrt(3)/2*r,s=1/Math.sqrt(3)*(r/2);a(t,e-s),t.beginPath(),t.moveTo(e,s),t.lineTo(e+r/2,s),t.lineTo(e,-(o-s)),t.lineTo(e-r/2,s),t.lineTo(e,s),t.closePath(),i(t,n)}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.className,i=void 0===a?"phylocanvas-tooltip":a,o=n.element,s=void 0===o?document.createElement("div"):o,l=n.zIndex,h=void 0===l?2e3:l,c=n.parent,u=void 0===c?e.containerElement:c;r(this,t),this.tree=e,this.element=s,this.element.className=i,this.element.style.display="none",this.element.style.position="fixed",this.element.style.zIndex=h,this.closed=!0,u.appendChild(this.element)}return n(t,[{key:"close",value:function(){this.element.style.display="none",this.closed=!0}},{key:"open",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments[2];this.element.hasChildNodes();)this.element.removeChild(this.element.firstChild);this.createContent(n),this.element.style.top=e+"px",this.element.style.left=t+"px",this.element.style.display="block",this.closed=!1}},{key:"createContent",value:function(){throw new Error("Not implemented")}}]),t}();e.default=a;e.ChildNodesTooltip=function(t){function e(t,n){r(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return a.element.style.background="rgba(97, 97, 97, 0.9)",a.element.style.color="#fff",a.element.style.cursor="pointer",a.element.style.padding="8px",a.element.style.marginTop="16px",a.element.style.borderRadius="2px",a.element.style.textAlign="center",a.element.style.fontFamily=a.tree.font||"sans-serif",a.element.style.fontSize="10px",a.element.style.fontWeight="500",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a),n(e,[{key:"createContent",value:function(t){var e=document.createTextNode(t.getChildProperties("id").length);this.element.appendChild(e)}}]),e}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(29)),a=o(n(30)),i=o(n(31));function o(t){return t&&t.__esModule?t:{default:t}}e.default={nexus:new r.default(i.default),newick:new r.default(a.default)}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var r=function(){function t(e){var n=e.format,r=e.parseFn,a=e.fileExtension,i=e.validator;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.format=n,this.parseFn=r,this.fileExtension=a,this.validator=i}return n(t,[{key:"parse",value:function(t,e){var n=t.formatString,r=t.root,a=t.options,i=void 0===a?{validate:!0}:a;return n.match(this.validator)||!1===i.validate?this.parseFn({string:n,root:r,options:i},e):e(new Error('Format string does not validate as "'+this.format+'"'))}}]),t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,a=n(7),i=(r=a)&&r.__esModule?r:{default:r};function o(t){return this===t}var s=[":",",",")",";"];var l=[")",",",";"];function h(t,e,n){var r=function(t){var e="",n=!0,r=!1,a=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var h=i.value;if(s.some(o.bind(h)))break;e+=h}}catch(t){r=!0,a=t}finally{try{!n&&l.return&&l.return()}finally{if(r)throw a}}return e}(e.slice(n)),a=n+r.length,h="";return r.match(/\*/)&&function(t,e){var n=t.split("**"),r={};if(e.id=n[0],1!==n.length){n=n[1].split("*");for(var a=0;a<n.length;a+=2){var i=n[a+1];switch(n[a]){case"nsz":r.size=window.parseInt(i);break;case"nsh":r.shape=i;break;case"ncol":r.colour=i}}e.setDisplay(r)}}(r,t),":"===e[a]?(h=function(t){var e="",n=!0,r=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var h=i.value;if(l.some(o.bind(h)))break;e+=h}}catch(t){r=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return e}(e.slice(a+1)),t.branchLength=Math.max(parseFloat(h),0)):t.branchLength=0,r&&(t.label=r),t.id=r||i.default.generateId(),a+h.length}e.default={format:"newick",fileExtension:/\.nwk$/,validator:/^[\w\W\.\*\:(\),-\/]+;?\s*$/gi,parseFn:function(t,e){for(var n=t.string,r=t.root,a=n.replace(/(\r|\n)/g,""),o=r,s=0;s<a.length;s++){var l=void 0;switch(a[s]){case"(":l=new i.default,o.addChild(l),o=l;break;case")":o=o.parent;break;case",":l=new i.default,o.parent.addChild(l),o=l;break;case";":break;default:try{s=h(o,a,s)}catch(t){return e(t)}}}return e()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(30);e.default={parseFn:function(t,e){var n=t.string,a=t.root,i=t.options;if(!n.match(/BEGIN TREES/gi))return e(new Error("The nexus file does not contain a tree block"));var o=i.name,s=n.match(/BEGIN TREES;[\S\s]+END;/i)[0].replace(/BEGIN TREES;\n/i,"").replace(/END;/i,""),l={},h=s.match(/TRANSLATE[^;]+;/i);if(h&&h.length){h=h[0],s=s.replace(h,"");for(var c=(h=h.replace(/translate|;/gi,"")).split(","),u=0;u<c.length;u++){var f=c[u].trim().replace("\n","").split(" ");f[0]&&f[1]&&(l[f[0].trim()]=f[1].trim())}}for(var d=s.split("\n"),p={},g=0;g<d.length;g++)if(""!==d[g].trim()){var v=d[g].replace(/tree\s/i,"");o||(o=v.trim().match(/^\w+/)[0]),p[o]=v.trim().match(/[\S]*$/)[0]}if(!p[o])return new Error("tree "+o+" does not exist in this NEXUS file");(0,r.parseFn)({string:p[o].trim(),root:a},function(t){if(t)return e(t);if(e(),l){var n=!0,r=!1,i=void 0;try{for(var o,s=Object.keys(l)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var h=o.value,c=a.tree.branches,u=c[h];delete c[h],u.id=l[h],c[u.id]=u}}catch(t){r=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}a.tree.draw()}})},format:"nexus",fileExtension:/\.n(ex|xs)$/,validator:/^#NEXUS[\s\n;\w\W\.\*\:(\),-=\[\]\/&]+$/i}}])},t.exports=r()},632:function(t,e,n){var r;t.exports=(r=n(566),function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return"circular"===t.treeType||"radial"===t.treeType}function a(t){return t.metadata.font?t.metadata.font:Math.min(t.textSize,t.metadata.blockLength)+"pt "+t.font}function i(t){var e=t.metadata,n=e.columns,r=e.propertyName;return n.length>0?n:Object.keys(t.leaves[0][r])}function o(t){var e=t.tree.canvas,n=t.tree,i=t.tree.metadata,o=i._maxLabelWidth,s=i.blockSize,l=i.blockLength,h=i.padding,c=i.propertyName,f=i.fillStyle,d=i.columns,p=i.showLabels,g=t.getLabelStartX(),v=0;(n.showLabels||n.hoverLabel&&t.highlighted)&&(g+=n.maxLabelLength[n.treeType]);var b=function(t){if(t.metadata._maxBlockSize)return t.metadata._maxBlockSize;if(r(t)){var e=0,n=!0,a=!1,i=void 0;try{for(var o,s=t.leaves[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value,h=l.getLabelStartX();(t.showLabels||t.hoverLabel&&l.highlighted)&&(h+=t.maxLabelLength[t.treeType]);var c=t.alignLabels?t.labelAlign.getLabelOffset(l):0,f=Math.hypot(l.centerx-l.startx,l.centery-l.starty)+h+c;f>e&&(e=f)}}catch(t){a=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}return t.metadata._maxBlockSize=u.FULL*e/t.leaves.length,t.metadata._maxBlockSize}return t.step}(n),m=null!==s?Math.min(b,s):b;n.alignLabels&&(g+=n.labelAlign.getLabelOffset(t)),g+=h,v-=m/2,!n.metadata._headingDrawn&&function(t){if(!t.metadata.showHeaders)return!1;var e=t.treeType,n=t.alignLabels;return"diagonal"===e||n&&"rectangular"===e||"hierarchical"===e}(n)&&(function(t,e,n){var r=t.tree.canvas,i=t.tree.treeType,o=t.tree.metadata,s=o._maxLabelWidth,l=o._maxHeaderWidth,h=o._maxHeaderHeight,c=o.blockLength,u=o.padding,f=o.headerAngle,d=o.showLabels,p=o.fillStyle,g=o.strokeStyle,v=o.underlineHeaders,b=t.tree.metadata.columns.length>0?t.tree.metadata.columns:Object.keys(t.data),m=t.tree.metadata.lineWidth/t.tree.zoom;r.font=a(t.tree),r.fillStyle=p,r.strokeStyle=g,r.lineWidth=m;var y=f/180*Math.PI,w=n+h/2+Math.sin(y)*l/2,_="hierarchical"===i?-1:1,x=e,k=!0,S=!1,C=void 0;try{for(var L,T=b[Symbol.iterator]();!(k=(L=T.next()).done);k=!0){var E=L.value,A=c+(d?s[E]:0);r.textAlign="center",r.textBaseline="middle";var P=x+A/2;r.rotate(-y),r.fillText(E,Math.cos(y)*P+Math.sin(y)*_*w,Math.sin(y)*P+Math.cos(y)*-_*w),r.rotate(y),v&&(r.beginPath(),r.moveTo(x,-_*n),r.lineTo(x+A,-_*n),r.stroke(),r.closePath()),x+=A+u}}catch(t){S=!0,C=t}finally{try{!k&&T.return&&T.return()}finally{if(S)throw C}}}(t,g,m/2+h),n.metadata._headingDrawn=!0);var y=this[c];if(Object.keys(y).length>0){e.beginPath();var w=d.length>0?d:Object.keys(y),_=1,x=r(n)&&n.alignLabels?u.FULL*l/n.leaves.length:0,k=a(n),S=!0,C=!1,L=void 0;try{for(var T,E=w[Symbol.iterator]();!(S=(T=E.next()).done);S=!0){var A=T.value;void 0!==y[A]&&"transparent"!==t.leafStyle.fillStyle&&(e.fillStyle=y[A].colour||y[A],e.fillRect(g,v,l,m+_*x),p&&"string"==typeof y[A].label&&(e.font=k,e.fillStyle=f,e.textAlign="left",e.textBaseline="middle",e.fillText(y[A].label,g+l+h/4,v+m/2))),g+=l+h,p&&(g+=o[A]),_++}}catch(t){C=!0,L=t}finally{try{!S&&E.return&&E.return()}finally{if(C)throw L}}e.closePath()}}Object.defineProperty(e,"__esModule",{value:!0});var s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.default=function(t){t(h.default,"createTree",function(t,e){var n=t.apply(void 0,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(e));return n.metadata=Object.assign({},f,n.metadata||{}),n});var e=l.Tree.prototype.__lookupGetter__("alignLabels");l.Tree.prototype.__defineGetter__("alignLabels",function(){return this.metadata.active?this.labelAlign&&this.labelAlignEnabled:e.call(this)}),t(l.Prerenderer,"run",function(t,e){t.apply(this,e);var n=s(e,1),r=n[0];(function(t){var e=t.canvas,n=t.metadata,r=n.showLabels,o=n.propertyName,s=n.headerAngle,l=i(t),h=s/180*Math.PI;e.font=a(t),t.metadata._maxHeaderWidth=0,t.metadata._maxHeaderHeight=e.measureText("M").width;var c={};if(r){var u=!0,f=!1,d=void 0;try{for(var p,g=l[Symbol.iterator]();!(u=(p=g.next()).done);u=!0){var v=p.value,b=e.measureText(v).width;c[v]=Math.cos(h)*b,b>t.metadata._maxHeaderWidth&&(t.metadata._maxHeaderWidth=b)}}catch(t){f=!0,d=t}finally{try{!u&&g.return&&g.return()}finally{if(f)throw d}}var m=!0,y=!1,w=void 0;try{for(var _,x=t.leaves[Symbol.iterator]();!(m=(_=x.next()).done);m=!0){var k=_.value,S=k[o],C=!0,L=!1,T=void 0;try{for(var E,A=l[Symbol.iterator]();!(C=(E=A.next()).done);C=!0){var P=E.value;if(S[P]&&"string"==typeof S[P].label){var M=e.measureText(S[P].label).width;M>c[P]&&(c[P]=M)}}}catch(t){L=!0,T=t}finally{try{!C&&A.return&&A.return()}finally{if(L)throw T}}}}catch(t){y=!0,w=t}finally{try{!m&&x.return&&x.return()}finally{if(y)throw w}}}else{var O=!0,$=!1,N=void 0;try{for(var j,R=l[Symbol.iterator]();!(O=(j=R.next()).done);O=!0){var z=j.value;c[z]=0}}catch(t){$=!0,N=t}finally{try{!O&&R.return&&R.return()}finally{if($)throw N}}}t.metadata._maxLabelWidth=c})(r),r.metadata._maxBlockSize=null}),t(l.Tree,"draw",function(t,e){this.metadata.active&&(this.metadata._headingDrawn=!1),t.apply(this,e)}),t(l.Tree,"getBounds",function(t,e){var n=t.apply(this,e);if(this.metadata.active){var r=n[0][0],a=n[0][1],i=n[1][0],o=n[1][1],s=this.metadata,l=s._maxHeaderWidth,h=s._maxHeaderHeight,c=this.treeType,u="rectangular"===c||"diagonal"===c,f="hierarchical"===c;return[[r-(f?l+h:0),a-(u?l+h:0)],[i,o]]}return n}),t(l.Branch,"drawLeaf",function(t){t.call(this),this.tree.metadata.active&&o.call(this,this)}),t(l.Branch,"getTotalLength",function(t){var e=t.call(this);return this.tree.metadata.active&&(e+=function(t){var e=t.metadata,n=e.showLabels,r=e.blockLength,a=e.padding,o=e._maxLabelWidth,s=i(t);return(n?s.reduce(function(t,e){return o[e]},0):0)+s.length*(r+a)}(this.tree)),e})};var l=n(1),h=function(t){return t&&t.__esModule?t:{default:t}}(l),c=l.utils.constants,u=c.Angles,f={_headingDrawn:!1,_maxLabelWidth:{},active:!0,showHeaders:!0,showLabels:!0,blockLength:32,blockSize:null,padding:8,columns:[],propertyName:"data",underlineHeaders:!0,headerAngle:90,fillStyle:"black",strokeStyle:"black",lineWidth:1,font:null}},function(t,e){t.exports=r}]))},633:function(t,e,n){t.exports=function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.default=function(t){t(this,"createTree",function(t,e){var n=t.apply(void 0,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(e)),a=r(e,2),i=a[1],o=void 0===i?{}:i;return n.exportSVG=new s(n,o.exportSVG),n}),this.ExportSVG=s};var i=n(1),o=function(t){return t&&t.__esModule?t:{default:t}}(i),s=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.tree=e,this.canvas=e.canvas.canvas,Object.assign(this,n)}return a(t,[{key:"exportSVG",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],n=this.tree.canvas,r=this.tree.canvas.canvas,a=r.width,i=r.height,s=new o.default(a,i);this.tree.canvas=s,this.tree.draw();var l=s[t].apply(s,e);return this.tree.canvas=n,this.tree.draw(),l}},{key:"getSVG",value:function(){return this.exportSVG("getSvg")}},{key:"getSerialisedSVG",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];return this.exportSVG("getSerializedSvg",[t])}}]),t}()},function(t,e,n){(function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(){function n(t,e){var n,r=Object.keys(e);for(n=0;n<r.length;n++)t=t.replace(new RegExp("\\{"+r[n]+"\\}","gi"),e[r[n]]);return t}function r(t){var e,n,r;if(!t)throw new Error("cannot create a random attribute name for an undefined object");e="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="";do{for(n="",r=0;r<12;r++)n+=e[Math.floor(Math.random()*e.length)]}while(t[n]);return n}function a(t){var e={left:"start",right:"end",center:"middle",start:"start",end:"end"};return e[t]||e.start}function i(t){var e={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return e[t]||e.alphabetic}var o,s,l,h,c;c=function(t,e){var n,r,a,i={};for(t=t.split(","),e=e||10,n=0;n<t.length;n+=2)r="&"+t[n+1]+";",a=parseInt(t[n],e),i[r]="&#"+a+";";return i["\\xa0"]="&#160;",i}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),o={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"}},(l=function(t,e){this.__root=t,this.__ctx=e}).prototype.addColorStop=function(t,e){var r,a=this.__ctx.__createElement("stop");a.setAttribute("offset",t),-1!==e.indexOf("rgba")?(r=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(e),a.setAttribute("stop-color",n("rgb({r},{g},{b})",{r:r[1],g:r[2],b:r[3]})),a.setAttribute("stop-opacity",r[4])):a.setAttribute("stop-color",e),this.__root.appendChild(a)},h=function(t,e){this.__root=t,this.__ctx=e},(s=function(t){var e,n={width:500,height:500,enableMirroring:!1};return arguments.length>1?((e=n).width=arguments[0],e.height=arguments[1]):e=t||n,this instanceof s?(this.width=e.width||n.width,this.height=e.height||n.height,this.enableMirroring=void 0!==e.enableMirroring?e.enableMirroring:n.enableMirroring,this.canvas=this,this.__document=e.document||document,this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d"),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),void this.__root.appendChild(this.__currentElement)):new s(e)}).prototype.__createElement=function(t,e,n){void 0===e&&(e={});var r,a,i=this.__document.createElementNS("http://www.w3.org/2000/svg",t),o=Object.keys(e);for(n&&(i.setAttribute("fill","none"),i.setAttribute("stroke","none")),r=0;r<o.length;r++)a=o[r],i.setAttribute(a,e[a]);return i},s.prototype.__setDefaultStyles=function(){var t,e,n=Object.keys(o);for(t=0;t<n.length;t++)this[e=n[t]]=o[e].canvas},s.prototype.__applyStyleState=function(t){var e,n,r=Object.keys(t);for(e=0;e<r.length;e++)this[n=r[e]]=t[n]},s.prototype.__getStyleState=function(){var t,e,n={},r=Object.keys(o);for(t=0;t<r.length;t++)e=r[t],n[e]=this[e];return n},s.prototype.__applyStyleToCurrentElement=function(t){var e,r,a,i,s,c=Object.keys(o);for(e=0;e<c.length;e++)if(r=o[c[e]],a=this[c[e]],r.apply)if(-1!==r.apply.indexOf("fill")&&a instanceof h){if(a.__ctx)for(;a.__ctx.__defs.childNodes.length;)i=a.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[i]=i,this.__defs.appendChild(a.__ctx.__defs.childNodes[0]);this.__currentElement.setAttribute("fill",n("url(#{id})",{id:a.__root.getAttribute("id")}))}else-1!==r.apply.indexOf("fill")&&a instanceof l?this.__currentElement.setAttribute("fill",n("url(#{id})",{id:a.__root.getAttribute("id")})):-1!==r.apply.indexOf(t)&&r.svg!==a&&("stroke"!==r.svgAttr&&"fill"!==r.svgAttr||-1===a.indexOf("rgba")?this.__currentElement.setAttribute(r.svgAttr,a):(s=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(a),this.__currentElement.setAttribute(r.svgAttr,n("rgb({r},{g},{b})",{r:s[1],g:s[2],b:s[3]})),this.__currentElement.setAttribute(r.svgAttr+"-opacity",s[4])))},s.prototype.__closestGroupOrSvg=function(t){return"g"===(t=t||this.__currentElement).nodeName||"svg"===t.nodeName?t:this.__closestGroupOrSvg(t.parentNode)},s.prototype.getSerializedSvg=function(t){var e,n,r,a,i,o=(new XMLSerializer).serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(o)&&(o=o.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),t)for(e=Object.keys(c),n=0;n<e.length;n++)r=e[n],a=c[r],(i=new RegExp(r,"gi")).test(o)&&(o=o.replace(i,a));return o},s.prototype.getSvg=function(){return this.__root},s.prototype.save=function(){var t=this.__createElement("g"),e=this.__closestGroupOrSvg();this.__groupStack.push(e),e.appendChild(t),this.__currentElement=t,this.__stack.push(this.__getStyleState())},s.prototype.restore=function(){this.__currentElement=this.__groupStack.pop();var t=this.__stack.pop();this.__applyStyleState(t)},s.prototype.__addTransform=function(t){var e=this.__closestGroupOrSvg();if(e.childNodes.length>0){var n=this.__createElement("g");e.appendChild(n),this.__currentElement=n}var r=this.__currentElement.getAttribute("transform");r?r+=" ":r="",r+=t,this.__currentElement.setAttribute("transform",r)},s.prototype.scale=function(t,e){void 0===e&&(e=t),this.__addTransform(n("scale({x},{y})",{x:t,y:e}))},s.prototype.rotate=function(t){var e=180*t/Math.PI;this.__addTransform(n("rotate({angle},{cx},{cy})",{angle:e,cx:0,cy:0}))},s.prototype.translate=function(t,e){this.__addTransform(n("translate({x},{y})",{x:t,y:e}))},s.prototype.transform=function(t,e,r,a,i,o){this.__addTransform(n("matrix({a},{b},{c},{d},{e},{f})",{a:t,b:e,c:r,d:a,e:i,f:o}))},s.prototype.beginPath=function(){var t;this.__currentDefaultPath="",this.__currentPosition={},t=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(t),this.__currentElement=t},s.prototype.__applyCurrentDefaultPath=function(){if("path"!==this.__currentElement.nodeName)throw new Error("Attempted to apply path command to node "+this.__currentElement.nodeName);var t=this.__currentDefaultPath;this.__currentElement.setAttribute("d",t)},s.prototype.__addPathCommand=function(t){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=t},s.prototype.moveTo=function(t,e){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:t,y:e},this.__addPathCommand(n("M {x} {y}",{x:t,y:e}))},s.prototype.closePath=function(){this.__addPathCommand("Z")},s.prototype.lineTo=function(t,e){this.__currentPosition={x:t,y:e},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(n("L {x} {y}",{x:t,y:e})):this.__addPathCommand(n("M {x} {y}",{x:t,y:e}))},s.prototype.bezierCurveTo=function(t,e,r,a,i,o){this.__currentPosition={x:i,y:o},this.__addPathCommand(n("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:t,cp1y:e,cp2x:r,cp2y:a,x:i,y:o}))},s.prototype.quadraticCurveTo=function(t,e,r,a){this.__currentPosition={x:r,y:a},this.__addPathCommand(n("Q {cpx} {cpy} {x} {y}",{cpx:t,cpy:e,x:r,y:a}))};var u=function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]};s.prototype.arcTo=function(t,e,n,r,a){var i=this.__currentPosition&&this.__currentPosition.x,o=this.__currentPosition&&this.__currentPosition.y;if(void 0!==i&&void 0!==o){if(a<0)throw new Error("IndexSizeError: The radius provided ("+a+") is negative.");if(i===t&&o===e||t===n&&e===r||0===a)return void this.lineTo(t,e);var s=u([i-t,o-e]),l=u([n-t,r-e]);if(s[0]*l[1]==s[1]*l[0])return void this.lineTo(t,e);var h=s[0]*l[0]+s[1]*l[1],c=Math.acos(Math.abs(h)),f=u([s[0]+l[0],s[1]+l[1]]),d=a/Math.sin(c/2),p=t+d*f[0],g=e+d*f[1],v=[-s[1],s[0]],b=[l[1],-l[0]],m=function(t){var e=t[0],n=t[1];return n>=0?Math.acos(e):-Math.acos(e)},y=m(v),w=m(b);this.lineTo(p+v[0]*a,g+v[1]*a),this.arc(p,g,a,y,w)}},s.prototype.stroke=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},s.prototype.fill=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},s.prototype.rect=function(t,e,n,r){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+r),this.lineTo(t,e+r),this.lineTo(t,e),this.closePath()},s.prototype.fillRect=function(t,e,n,r){var a;a=this.__createElement("rect",{x:t,y:e,width:n,height:r},!0),this.__closestGroupOrSvg().appendChild(a),this.__currentElement=a,this.__applyStyleToCurrentElement("fill")},s.prototype.strokeRect=function(t,e,n,r){var a;a=this.__createElement("rect",{x:t,y:e,width:n,height:r},!0),this.__closestGroupOrSvg().appendChild(a),this.__currentElement=a,this.__applyStyleToCurrentElement("stroke")},s.prototype.clearRect=function(t,e,n,r){var a,i=this.__closestGroupOrSvg();a=this.__createElement("rect",{x:t,y:e,width:n,height:r,fill:"#FFFFFF"},!0),i.appendChild(a)},s.prototype.createLinearGradient=function(t,e,n,a){var i=this.__createElement("linearGradient",{id:r(this.__ids),x1:t+"px",x2:n+"px",y1:e+"px",y2:a+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(i),new l(i,this)},s.prototype.createRadialGradient=function(t,e,n,a,i,o){var s=this.__createElement("radialGradient",{id:r(this.__ids),cx:a+"px",cy:i+"px",r:o+"px",fx:t+"px",fy:e+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(s),new l(s,this)},s.prototype.__parseFont=function(){var t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\"\sa-z]+?)\s*$/i.exec(this.font),e={style:t[1]||"normal",size:t[4]||"10px",family:t[6]||"sans-serif",weight:t[3]||"normal",decoration:t[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(e.decoration="underline"),this.__fontHref&&(e.href=this.__fontHref),e},s.prototype.__wrapTextLink=function(t,e){if(t.href){var n=this.__createElement("a");return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.href),n.appendChild(e),n}return e},s.prototype.__applyText=function(t,e,n,r){var o=this.__parseFont(),s=this.__closestGroupOrSvg(),l=this.__createElement("text",{"font-family":o.family,"font-size":o.size,"font-style":o.style,"font-weight":o.weight,"text-decoration":o.decoration,x:e,y:n,"text-anchor":a(this.textAlign),"dominant-baseline":i(this.textBaseline)},!0);l.appendChild(this.__document.createTextNode(t)),this.__currentElement=l,this.__applyStyleToCurrentElement(r),s.appendChild(this.__wrapTextLink(o,l))},s.prototype.fillText=function(t,e,n){this.__applyText(t,e,n,"fill")},s.prototype.strokeText=function(t,e,n){this.__applyText(t,e,n,"stroke")},s.prototype.measureText=function(t){return this.__ctx.font=this.font,this.__ctx.measureText(t)},s.prototype.arc=function(t,e,r,a,i,o){if(a!==i){a%=2*Math.PI,i%=2*Math.PI,a===i&&(i=(i+2*Math.PI-.001*(o?-1:1))%(2*Math.PI));var s=t+r*Math.cos(i),l=e+r*Math.sin(i),h=t+r*Math.cos(a),c=e+r*Math.sin(a),u=o?0:1,f=0,d=i-a;d<0&&(d+=2*Math.PI),f=o?d>Math.PI?0:1:d>Math.PI?1:0,this.lineTo(h,c),this.__addPathCommand(n("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:r,ry:r,xAxisRotation:0,largeArcFlag:f,sweepFlag:u,endX:s,endY:l})),this.__currentPosition={x:s,y:l}}},s.prototype.clip=function(){var t=this.__closestGroupOrSvg(),e=this.__createElement("clipPath"),a=r(this.__ids),i=this.__createElement("g");t.removeChild(this.__currentElement),e.setAttribute("id",a),e.appendChild(this.__currentElement),this.__defs.appendChild(e),t.setAttribute("clip-path",n("url(#{id})",{id:a})),t.appendChild(i),this.__currentElement=i},s.prototype.drawImage=function(){var t,e,n,r,a,i,o,l,h,c,u,f,d,p,g=Array.prototype.slice.call(arguments),v=g[0],b=0,m=0;if(3===g.length)t=g[1],e=g[2],a=v.width,i=v.height,n=a,r=i;else if(5===g.length)t=g[1],e=g[2],n=g[3],r=g[4],a=v.width,i=v.height;else{if(9!==g.length)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);b=g[1],m=g[2],a=g[3],i=g[4],t=g[5],e=g[6],n=g[7],r=g[8]}if(o=this.__closestGroupOrSvg(),u=this.__currentElement,v instanceof s){for(l=v.getSvg(),h=l.childNodes[0];h.childNodes.length;)p=h.childNodes[0].getAttribute("id"),this.__ids[p]=p,this.__defs.appendChild(h.childNodes[0]);c=l.childNodes[1],o.appendChild(c),this.__currentElement=c,this.translate(t,e),this.__currentElement=u}else"CANVAS"!==v.nodeName&&"IMG"!==v.nodeName||((f=this.__createElement("image")).setAttribute("width",n),f.setAttribute("height",r),f.setAttribute("preserveAspectRatio","none"),(b||m||a!==v.width||i!==v.height)&&((d=this.__document.createElement("canvas")).width=n,d.height=r,d.getContext("2d").drawImage(v,b,m,a,i,0,0,n,r),v=d),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===v.nodeName?v.toDataURL():v.getAttribute("src")),o.appendChild(f),this.__currentElement=f,this.translate(t,e),this.__currentElement=u)},s.prototype.createPattern=function(t,e){var n,a=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),i=r(this.__ids);return a.setAttribute("id",i),a.setAttribute("width",t.width),a.setAttribute("height",t.height),"CANVAS"===t.nodeName||"IMG"===t.nodeName?((n=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",t.width),n.setAttribute("height",t.height),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===t.nodeName?t.toDataURL():t.getAttribute("src")),a.appendChild(n),this.__defs.appendChild(a)):t instanceof s&&(a.appendChild(t.__root.childNodes[1]),this.__defs.appendChild(a)),new h(a,this)},s.prototype.drawFocusRing=function(){},s.prototype.createImageData=function(){},s.prototype.getImageData=function(){},s.prototype.putImageData=function(){},s.prototype.globalCompositeOperation=function(){},s.prototype.setTransform=function(){},"object"===("undefined"==typeof window?"undefined":e(window))&&(window.C2S=s),"object"===e(t)&&"object"===e(t.exports)&&(t.exports=s)}()}).call(e,n(2)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}])},913:function(t,e,n){n(914),t.exports="ngAside"},914:function(t,e){
/*!
 * angular-aside - v1.4.0
 * https://github.com/dbtek/angular-aside
 * 2017-03-27
 * Copyright (c) 2017 İsmail Demirbilek
 * License: MIT
 */
!function(){"use strict";angular.module("ngAside",["ui.bootstrap.modal"])}(),function(){"use strict";angular.module("ngAside").factory("$aside",["$uibModal",function(t){var e=this.defaults={placement:"left"},n={open:function(n){var r=angular.extend({},e,n);-1===["left","right","bottom","top"].indexOf(r.placement)&&(r.placement=e.placement);var a=-1===["left","right"].indexOf(r.placement)?"vertical":"horizontal";return r.windowClass="ng-aside "+a+" "+r.placement+(r.windowClass?" "+r.windowClass:""),delete r.placement,t.open(r)}};return angular.extend({},t,n)}])}()},915:function(t,e,n){},916:function(t,e,n){},987:function(t,e,n){"use strict";n.r(e);var r=n(26),a=n.n(r),i=(n(561),n(913),n(915),{LOADED:"metadata.loaded",ERROR:"metadata.error",EMPTY:"metadata.empty",UPDATED:"metadata.updated",TEMPLATE:"metadata.template",ALL_FIELDS:"metadata.all_fields"}),o={NOT_LOADED:"tree.notLoaded",COMPLETED:"tree.completed",EXPORT_SVG:"tree.export.svg"},s={ERROR:"templates.error"};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}var u=function(){function t(e,n){l(this,t),this.terms=n.terms,this.parent=n,this.modal=e}return c(t,[{key:"termSelectionChange",value:function(){this.parent.handleTermVisibilityChange()}},{key:"close",value:function(){this.modal.dismiss()}}]),t}();u.$inject=["$uibModalInstance","parent"];var f=function(){function t(e,n,r){var o=this;l(this,t),this.$rootScope=e,this.$aside=r,this.terms=[],n.$on(i.TEMPLATE,function(t,e){var n=e.fields,r=a.a.copy(o.terms),i=[];n&&n.forEach(function(t){var e=r.findIndex(function(e){return e.term===t});if(e>=0){var n=r.splice(e,1)[0];n.selected=!0,i.push(n)}});var s=void 0===n;r.forEach(function(t){t.selected=s,i.push(t)}),o.terms=i,o.handleTermVisibilityChange()}),n.$on(i.LOADED,function(t,e){var n=e.terms;o.terms=n.map(function(t){return{term:t,selected:!0}})})}return c(t,[{key:"handleTermVisibilityChange",value:function(){var t=this.terms.filter(function(t){return t.selected}).map(function(t){return t.term});this.$rootScope.$broadcast(i.UPDATED,{columns:t})}},{key:"openMetadataAside",value:function(){var t=this;this.$aside.open({templateUrl:"metadataAside.tmpl.html",placement:"left",size:"sm",openedClass:"metadata-open",controllerAs:"$ctrl",controller:u,resolve:{parent:function(){return t}}})}}]),t}();f.$inject=["$rootScope","$scope","$aside"];var d={bindings:{metadataUrl:"@"},templateUrl:"metadataButton.tmpl.html",controller:f};var p={bindings:{terms:"<",onSelectionChange:"&"},templateUrl:"metadata-component.tmpl.html",controller:function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}},g=n(423),v=n.n(g);function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var m=function(t,e){for(var n={},r={},a=Object.keys(t),i=0;i<a.length;i++){var o=a[i],s=t[o];n[o]={};var l=!0,h=!1,c=void 0;try{for(var u,f=e[Symbol.iterator]();!(l=(u=f.next()).done);l=!0){var d=u.value,p=s[d].value;p?(r[d]=r[d]||{},r[d][p]=r[d][p]||v.a.random().css(),n[o][d]={label:p,colour:r[d][p]}):n[o][d]={label:p,colour:"rgba(0,0,0,0)"}}}catch(t){h=!0,c=t}finally{try{l||null==f.return||f.return()}finally{if(h)throw c}}}var g={};return e.forEach(function(t){g[t]={label:"",colour:"rgba(0,0,0,0)"}}),n.reference=g,n},y=function(){function t(e,n,r){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$rootScope=r,e.get(n.PAGE.urls.metadata).then(function(t){var e=t.data,n=e.terms,o=e.metadata;Object.keys(o).length&&n.length?(a.terms=n,a.metadata=m(o,n),r.$broadcast(i.LOADED,{metadata:a.metadata,terms:n})):a.$rootScope.$broadcast(i.EMPTY)},function(){a.$rootScope.$broadcast(i.ERROR)})}var e,n,r;return e=t,(n=[{key:"getSortedAndFilteredColumns",value:function(t){var e=this;return t?t.filter(function(t){return e.terms.includes(t)}):[]}}])&&b(e.prototype,n),r&&b(e,r),t}();y.$inject=["$http","$window","$rootScope"];var w=a.a.module("irida.vis.metadata",["ngAside","frapontillo.bootstrap-switch"]).service("MetadataService",y).component("metadataButton",d).component("metadataComponent",p).name,_=n(566),x=n.n(_),k=n(632),S=n.n(k),C=n(633),L=n.n(C),T=(n(916),"phylocanvas"),E={showHeaders:!0,showLabels:!0,blockLength:32,blockSize:32,padding:25,columns:[],propertyName:"data",underlineHeaders:!0,headerAngle:0,fillStyle:"black",strokeStyle:"black",lineWidth:1},A=function(t){document.querySelector("#".concat(T)).style.height="".concat(t.innerHeight-180,"px")};function P(t,e,n,r,s,l){var h=this;A(t),r.plugin(S.a),r.plugin(L.a);var c=r.createTree(T,{lineWidth:2,metadata:E}),u=[],f=n.defer();u.push(f.promise),this.$onInit=function(){var t=s.getNewickData(h.newickurl).then(function(t){return t},function(){e.$emit(o.NOT_LOADED)});u.push(t),n.all(u).then(function(t){var n=t[1];a.a.isString(n)&&c.load(n),e.$emit(o.COMPLETED)})},c.setTreeType("rectangular"),c.alignLabels=!0,e.$on(i.UPDATED,function(t,e){e.columns.length>0?(c.metadata.active=!0,c.metadata.columns=e.columns):c.metadata.active=!1,c.draw(),c.fitInPanel(),c.draw()}),e.$on(i.EMPTY,function(){f.resolve()}),e.$on(i.LOADED,function(t,e){var n=e.metadata;c.on("beforeFirstDraw",function(){var t=!0,e=!1,r=void 0;try{for(var a,i=c.leaves[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;o.data=n[o.label]}}catch(t){e=!0,r=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw r}}}),f.resolve()}),e.$on(i.TEMPLATE,function(t,e){var n=e.fields;c.metadata.columns=l.getSortedAndFilteredColumns(n),c.draw(),c.fitInPanel(),c.draw()}),e.$on(o.EXPORT_SVG,function(){var t=c.exportSVG.getSerialisedSVG(),e="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(t)),n=document.createElement("a");n.href=e,document.body.appendChild(n),n.download="tree-".concat(Date.now(),".svg"),n.click(),document.body.removeChild(n)})}P.$inject=["$window","$scope","$q","Phylocanvas","PhylocanvasService","MetadataService"];var M={bindings:{newickurl:"@"},templateUrl:"phylocanvas.tmpl.html",controller:P};function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$http=e}var e,n,r;return e=t,(n=[{key:"getNewickData",value:function(t){return this.$http.get(t).then(function(t){return t.data.newick})}}])&&O(e.prototype,n),r&&O(e,r),t}();$.$inject=["$http"];var N=a.a.module("irida.vis.phylocanvas",[]).value("Phylocanvas",x.a).component("phylocanvasComponent",M).service("PhylocanvasService",$).name;function j(t,e){var n=this;this.$onInit=function(){n.templates=[],e.getTemplates(n.templatesurl).then(function(t){n.templates=t},function(){t.$broadcast(s.ERROR)})},this.templateChange=function(){n.selectedTemplate?e.getFieldsForTemplate(n.fieldsurl,n.selectedTemplate).then(function(e){return t.$broadcast(i.TEMPLATE,{fields:e})}):t.$broadcast(i.TEMPLATE,i.ALL_FIELDS)}}j.$inject=["$rootScope","TemplateService"];var R={bindings:{templatesurl:"@",fieldsurl:"@"},templateUrl:"template-component.tmpl.html",controller:j};function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var F=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$http=e}var e,n,r;return e=t,(n=[{key:"getTemplates",value:function(t){return this.$http.get(t).then(function(t){return t.data.templates})}},{key:"getFieldsForTemplate",value:function(t,e){return this.$http.get("".concat(t,"?templateId=").concat(e)).then(function(t){return t.data.fields})}}])&&z(e.prototype,n),r&&z(e,r),t}();F.$inject=["$http"];var B=a.a.module("irida.vis.template",[]).service("TemplateService",F).component("templateComponent",R).name;var D=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.loading=!0,e.$on(i.ERROR,function(){n.metadataError=!0}),e.$on(i.EMPTY,function(){n.metadataEmpty=!0,n.showEmptyMetadataWarning=!0}),e.$on(i.LOADED,function(){n.metadataLoaded=!0}),e.$on(o.NOT_LOADED,function(){n.treeError=!0}),e.$on(o.COMPLETED,function(){n.loading=!1}),e.$on(s.ERROR,function(){n.templateError=!0,n.loading=!1}),this.closeEmptyMetadataWarning=function(){n.showEmptyMetadataWarning=!1}};D.$inject=["$scope"];var I={transclude:!0,controller:D,templateUrl:"app-component.tmpl.html"};function W(t){this.exportSVG=function(){t.$broadcast(o.EXPORT_SVG)}}W.$inject=["$rootScope"];var U={templateUrl:"export-svg-component.tmpl.html",controller:W},H=a.a.module("irida.vis.exportSVG",[]).component("exportSvgComponent",U).name,G=a.a.module("irida.vis.errors",[w,N,B,H]).component("appComponent",I).name;a.a.module("irida").requires.push(G)}});
//# sourceMappingURL=visualizations-phylogenetics.bundle.js.map