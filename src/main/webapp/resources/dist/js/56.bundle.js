(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{1007:function(e,t,r){"use strict";var n=r(38),a=r.n(n);function i(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}var o=function(e,t){return"".concat(window.TL.BASE_URL,"api/oauth/authorize?client_id=").concat(e,"&response_type=code&scope=read&redirect_uri=").concat(t)},l=function(){var e=void 0!==window.screenLeft?window.screenLeft:window.screenX,t=void 0!==window.screenTop?window.screenTop:window.screenY,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,n=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,a=(r-400)/2+e;return"top=".concat((n-400)/2+t,",left=").concat(a,",width=").concat(400,",height=").concat(400,",scrollbars=no,status=1")};function c(){var e;return e=regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o(t,r),a=l(),e.abrupt("return",new Promise(function(e,r){window.handleGalaxyCode=function(t){return e(t)},window.handleGalaxyError=function(){return r("ERROR")},window.handleClosing=function(){return r("CLOSED")},window.open(n,t,a)}));case 3:case"end":return e.stop()}},e)}),(c=function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function l(e){i(o,n,a,l,c,"next",e)}function c(e){i(o,n,a,l,c,"throw",e)}l(void 0)})}).apply(this,arguments)}r.d(t,"c",function(){return s}),r.d(t,"a",function(){return m}),r.d(t,"b",function(){return f});var u="".concat(window.TL.BASE_URL,"ajax/galaxy-export");function s(){var e="".concat(window.TL.BASE_URL,"galaxy/auth_code");return function(e,t){return c.apply(this,arguments)}(window.GALAXY.CLIENT_ID,e).then(function(e){return e}).catch(function(e){return e})}var m=function(){return a.a.get("".concat(u,"/samples")).then(function(e){return e.data})},f=function(){return a.a.get("".concat(u,"/remove")).then(function(){document.body.dispatchEvent(new Event("galaxy:removal"))})}},1045:function(e,t,r){"use strict";r.r(t);r(1002);var n=r(1003),a=(r(1004),r(1005)),i=(r(1015),r(1014)),o=r(0),l=r.n(o),c=(r(1),Object(o.createContext)()),u=function(e){var t=e.reducer,r=e.initialState,n=e.children;return l.a.createElement(c.Provider,{value:Object(o.useReducer)(t,r),__source:{fileName:"/usr/users/QIB_fr005/alikhan/code/irida/src/main/webapp/resources/js/components/galaxy/GalaxyState.jsx",lineNumber:6},__self:this},n)},s=function(){return Object(o.useContext)(c)},m=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){d(e,t,r[t])})}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _="GALAXY/SET_GALAXY_EMAIL",p="GALAXY/MAKE_PAIRED_COLLECTION_UPDATED",h="GALAXY_OAUTH_WINDOW_CLOSED",b="GALAXY/SUBMIT",y="GALAXY/SUBMIT_ERROR",w={email:window.PAGE.user,validEmail:!0,makepairedcollection:!0,fetchingSamples:!1,submitted:!1,submittable:!0,errored:!1},v=function(e,t){switch(t.type){case _:return f({},e,{email:t.payload.email,validEmail:(r=t.payload.email,m.test(String(r).toLowerCase()))});case p:return f({},e,{makepairedcollection:t.payload.makepairedcollection});case h:return f({},e,{submittable:!0,submitted:!1});case b:return f({},e,{fetchingSamples:!0,submitted:!0});case y:return f({},e,{fetchingSamples:!1,submittable:!0,submitted:!1,errored:!0});default:return f({},e)}var r},E={setEmail:function(e){return{type:_,payload:{email:e}}},setMakePairedCollection:function(e){return{type:p,payload:{makepairedcollection:e}}},submit:function(){return{type:b}},submitError:function(){return{type:y}},oauthWindowClosed:function(){return{type:h}}},g=(r(683),r(583)),x=(r(571),r(221)),N=(r(639),r(574)),j=r(1e3),A=r(1001),O="/usr/users/QIB_fr005/alikhan/code/irida/src/main/webapp/resources/js/components/galaxy/GalaxyDetailsForm.jsx";function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(){var e=S(s(),2),t=e[0],r=t.email,n=t.validEmail,a=t.makepairedcollection,i=e[1],o=window.decodeURI(window.GALAXY.URL).split("/tool_runner")[0];return l.a.createElement("div",{__source:{fileName:O,lineNumber:29},__self:this},l.a.createElement("p",{__source:{fileName:O,lineNumber:30},__self:this},l.a.createElement("span",{style:{fontWeight:A.e},__source:{fileName:O,lineNumber:31},__self:this},Object(j.a)("ExportToGalaxyForm.galaxy"))," ",l.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:o,__source:{fileName:O,lineNumber:34},__self:this},o)),l.a.createElement(x.a,{layout:"vertical",hideRequiredMark:!0,__source:{fileName:O,lineNumber:38},__self:this},l.a.createElement(x.a.Item,{label:Object(j.a)("ExportToGalaxyForm.email"),validateStatus:n?"success":"error",help:Object(j.a)("ExportToGalaxyForm.email.help"),__source:{fileName:O,lineNumber:39},__self:this},l.a.createElement(N.a,{onChange:function(e){return i(E.setEmail(e.target.value))},value:r,__source:{fileName:O,lineNumber:44},__self:this})),l.a.createElement(x.a.Item,{help:Object(j.a)("ExportToGalaxyForm.makepairedcollection.help"),__source:{fileName:O,lineNumber:46},__self:this},l.a.createElement(g.a,{onChange:function(e){return updateMakePairedCollection(e.target.checked)},checked:a,__source:{fileName:O,lineNumber:49},__self:this},Object(j.a)("ExportToGalaxyForm.makepairedcollection")))))}r(568);var L=r(429),G=(r(451),r(36)),I=r(999),R="/usr/users/QIB_fr005/alikhan/code/irida/src/main/webapp/resources/js/components/galaxy/GalaxySamples.jsx";function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function C(){var e=T(s(),2),t=e[0].fetchingSamples;e[1];return l.a.createElement("div",{style:{marginBottom:I.b},__source:{fileName:R,lineNumber:15},__self:this},t?l.a.createElement(L.a,{message:Object(j.a)("GalaxySamples.processing"),icon:l.a.createElement(G.a,{type:"loading",__source:{fileName:R,lineNumber:19},__self:this}),showIcon:!0,type:"info",__source:{fileName:R,lineNumber:17},__self:this}):null)}var B="/usr/users/QIB_fr005/alikhan/code/irida/src/main/webapp/resources/js/components/galaxy/GalaxySubmitError.jsx";function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function D(){var e=P(s(),1)[0].errored;return l.a.createElement("div",{__source:{fileName:B,lineNumber:10},__self:this},e?l.a.createElement(L.a,{style:{marginBottom:I.b},type:"error",showIcon:!0,message:Object(j.a)("GalaxySubmissionError.message"),description:Object(j.a)("GalaxySubmissionError.description"),__source:{fileName:B,lineNumber:12},__self:this}):null)}r(232);var U=r(90),z=r(1007),W=function(e){var t=e.email,r=e.makepairedcollection,n=e.oauthCode,a=e.oauthRedirect,i=e.samples,o={_embedded:{library:{name:"IRIDA-".concat(Date.now())},user:{email:t},addtohistory:!0,makepairedcollection:r,oauth2:{code:n,redirect:a},samples:i}},l=document.forms["js-galaxy-form"];if(void 0===l)throw new Error('Expecting the galaxy form with name "js-galaxy-form"');l.elements["js-query"].value=JSON.stringify(o),l.submit()},X="/usr/users/QIB_fr005/alikhan/code/irida/src/main/webapp/resources/js/components/galaxy/GalaxySubmission.jsx";function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function F(){var e=Y(s(),2),t=e[0],r=(t.submittable,t.submitted),n=t.email,a=t.validEmail,i=t.makepairedcollection,o=e[1];return l.a.createElement(U.a,{type:"primary",disabled:!a,loading:r,onClick:function(){Object(z.c)().then(function(e){switch(e){case"ERROR":o(E.submitError());break;case"CLOSED":o(E.oauthWindowClosed());break;default:Object(z.a)().then(function(t){o(E.submit()),Object(z.b)().then(function(){W({email:n,makepairedcollection:i,oauthCode:e,oauthRedirect:"".concat(window.TL.BASE_URL,"galaxy/auth_code"),samples:t})})})}})},__source:{fileName:X,lineNumber:54},__self:this},Object(j.a)("GalaxyFinalSubmission.submit"))}r.d(t,"default",function(){return Q});var M="/usr/users/QIB_fr005/alikhan/code/irida/src/main/webapp/resources/js/components/galaxy/GalaxyApp.jsx";function Q(){return l.a.createElement(u,{initialState:w,reducer:v,__source:{fileName:M,lineNumber:17},__self:this},l.a.createElement(n.a,{__source:{fileName:M,lineNumber:18},__self:this},l.a.createElement(a.a,{lg:{span:12,offset:6},md:24,__source:{fileName:M,lineNumber:19},__self:this},l.a.createElement(i.a,{__source:{fileName:M,lineNumber:20},__self:this},l.a.createElement(k,{__source:{fileName:M,lineNumber:21},__self:this}),l.a.createElement(C,{__source:{fileName:M,lineNumber:22},__self:this}),l.a.createElement(D,{__source:{fileName:M,lineNumber:23},__self:this}),l.a.createElement(F,{__source:{fileName:M,lineNumber:24},__self:this})))))}Q.propTypes={}}}]);
//# sourceMappingURL=56.bundle.js.map