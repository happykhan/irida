{"version":3,"sources":["webpack:///./resources/js/styles/fonts.js","webpack:///./resources/js/apis/oauth/oauth.js","webpack:///./resources/js/apis/galaxy/galaxy.js","webpack:///./resources/js/components/Header/GalaxyAlert.jsx","webpack:///./resources/js/styles/spacing.js"],"names":["__webpack_require__","d","__webpack_exports__","FONT_SIZE_DEFAULT","FONT_SIZE_LARGE","FONT_WEIGHT_DEFAULT","FONT_WEIGHT_HEAVY","FONT_COLOR_PRIMARY","_colors__WEBPACK_IMPORTED_MODULE_0__","grey9","grey7","blue6","red6","gold6","createHref","clientId","redirectUrl","concat","window","TL","BASE_URL","getWindowFeatures","dualScreenLeft","screenLeft","screenX","dualScreenTop","screenTop","screenY","width","innerWidth","document","documentElement","clientWidth","screen","height","innerHeight","clientHeight","left","_callee","href","options","regeneratorRuntime","wrap","_context","prev","next","abrupt","Promise","resolve","reject","handleGalaxyCode","code","handleGalaxyError","handleClosing","open","stop","validateOauthClient","galaxy_getGalaxySamples","galaxy_removeGalaxySession","GALAXY_AJAX_URL","redirect","_x","_x2","_authenticateOauthClient","apply","this","arguments","authenticateOauthClient","GALAXY","CLIENT_ID","then","catch","response","getGalaxySamples","axios","get","_ref","data","removeGalaxySession","body","dispatchEvent","Event","GalaxyAlert","galaxyUrl","decodeURI","URL","split","message","react__WEBPACK_IMPORTED_MODULE_4___default","a","createElement","__source","fileName","_jsxFileName","lineNumber","__self","style","fontWeight","marginRight","SPACE_XS","TITLE","MESSAGE","target","rel","DOCUMENTATION","antd_es_icon__WEBPACK_IMPORTED_MODULE_3__","type","antd_es_alert__WEBPACK_IMPORTED_MODULE_1__","banner","closable","closeText","CANCEL","onClose","SPACE_MD","SPACE_SM"],"mappings":"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","file":"js/55.bundle.js","sourcesContent":["import { blue6, gold6, grey7, grey9, red6 } from \"./colors\";\n\n/*\nSIZES\n */\nexport const FONT_SIZE_DEFAULT = \"14px\";\nexport const FONT_SIZE_LARGE = \"16px\";\nexport const FONT_SIZE_SMALL = \"12px\";\n\n/*\nWEIGHTS\n */\nexport const FONT_WEIGHT_DEFAULT = 300;\nexport const FONT_WEIGHT_HEAVY = 500;\n\n/*\nCOLOURS\n */\nexport const FONT_COLOR_DEFAULT = grey9;\nexport const FONT_COLOR_MUTED = grey7;\nexport const FONT_COLOR_PRIMARY = blue6;\nexport const FONT_COLOR_INFO = blue6;\nexport const FONT_COLOR_ERROR = red6;\nexport const FONT_COLOR_WARNING = gold6;\n","const createHref = (clientId, redirectUrl) =>\n  `${\n    window.TL.BASE_URL\n  }api/oauth/authorize?client_id=${clientId}&response_type=code&scope=read&redirect_uri=${redirectUrl}`;\n/**\n * Create a DOMString containing a comma-separated list of window features for the pop up window.\n * @returns {string}\n */\nconst getWindowFeatures = () => {\n  /*\n  Center the opened window within the current browser.\n   */\n  const popupHeight = 400;\n  const popupWidth = 400;\n\n  // Fixes dual-screen position Most browsers Firefox\n  const dualScreenLeft =\n    typeof window.screenLeft !== \"undefined\"\n      ? window.screenLeft\n      : window.screenX;\n  const dualScreenTop =\n    typeof window.screenTop !== \"undefined\" ? window.screenTop : window.screenY;\n\n  const width = window.innerWidth\n    ? window.innerWidth\n    : document.documentElement.clientWidth\n    ? document.documentElement.clientWidth\n    : screen.width;\n  const height = window.innerHeight\n    ? window.innerHeight\n    : document.documentElement.clientHeight\n    ? document.documentElement.clientHeight\n    : screen.height;\n\n  const left = (width - popupWidth) / 2 + dualScreenLeft;\n  const top = (height - popupHeight) / 2 + dualScreenTop;\n\n  return `top=${top},left=${left},width=${popupHeight},height=${popupHeight},scrollbars=no,status=1`;\n};\n\nexport async function authenticateOauthClient(clientId, redirectUrl) {\n  const href = createHref(clientId, redirectUrl);\n  const options = getWindowFeatures();\n\n  // Create a promise since we do not know how long the user will have the window open for.\n  return new Promise((resolve, reject) => {\n    // Create a global handler to accept the oath code.  This code is in\n    // this is called from the galaxy_auth_code.tmpl.html page after authorization\n    // is granted.\n    window.handleGalaxyCode = code => resolve(code);\n    window.handleGalaxyError = () => reject(\"ERROR\");\n    window.handleClosing = () => reject(\"CLOSED\");\n\n    window.open(href, clientId, options);\n  });\n}\n","import axios from \"axios\";\nimport { authenticateOauthClient } from \"../oauth/oauth\";\n\nconst GALAXY_AJAX_URL = `${window.TL.BASE_URL}ajax/galaxy-export`;\n\n/**\n * This will open an new window providing the user with the ability to authenticate\n * the galaxy instance if required.\n * @returns {Promise<any>}\n */\nexport function validateOauthClient() {\n  const redirect = `${window.TL.BASE_URL}galaxy/auth_code`;\n  return authenticateOauthClient(window.GALAXY.CLIENT_ID, redirect)\n    .then(code => code)\n    .catch(response => response);\n}\n\n/**\n * Get the samples that are in the cart in correct format to be sent to galaxy.\n * @returns {Promise<AxiosResponse<any> | never>}\n */\nexport const getGalaxySamples = () =>\n  axios.get(`${GALAXY_AJAX_URL}/samples`).then(({ data }) => data);\n\n/**\n * Remove galaxy from the IRIDA session.\n * @returns {Promise<AxiosResponse<any> | never>}\n */\nexport const removeGalaxySession = () =>\n  axios.get(`${GALAXY_AJAX_URL}/remove`).then(() => {\n    // Let's components depending on the galaxy session know\n    // that it is no longer available\n    document.body.dispatchEvent(new Event(\"galaxy:removal\"));\n  });\n","import React from \"react\";\nimport { Alert, Icon } from \"antd\";\nimport { removeGalaxySession } from \"../../apis/galaxy/galaxy\";\nimport { FONT_WEIGHT_HEAVY } from \"../../styles/fonts\";\nimport { SPACE_XS } from \"../../styles/spacing\";\n\nexport default function GalaxyAlert() {\n  const galaxyUrl = window\n    .decodeURI(window.GALAXY.URL)\n    .split(\"/tool_runner\")[0];\n\n  const message = (\n    <span>\n      <span style={{ fontWeight: FONT_WEIGHT_HEAVY, marginRight: SPACE_XS }}>\n        {window.GALAXY.TITLE}\n      </span>\n      {window.GALAXY.MESSAGE}{\" \"}\n      <a target=\"_blank\" rel=\"noopener noreferrer\" href={galaxyUrl}>\n        {galaxyUrl}\n      </a>\n      .\n      <br />\n      <a\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        href=\"https://irida.corefacility.ca/documentation/user/user/samples/#galaxy-export\"\n      >\n        {window.GALAXY.DOCUMENTATION} <Icon type=\"link\" />\n      </a>\n    </span>\n  );\n\n  return (\n    <Alert\n      type=\"info\"\n      message={message}\n      banner\n      closable\n      closeText={window.GALAXY.CANCEL}\n      onClose={removeGalaxySession}\n    />\n  );\n}\n","/**\n * @fileOverview Spacing used in .js and .jsx files need to be standardized\n * using the values contained in this file.\n *\n * PLEASE TO NOT ADD TO OR CHANGE VALUES IN THIS FILE WITHOUT SPEAKING TO THE\n * LEAD ON INTERFACE DESIGN.\n */\n\nexport const SPACE_MD = \"16px\";\nexport const SPACE_SM = \"12px\";\nexport const SPACE_XS = \"8px\";\nexport const SPACE_LG = \"24px\";\n"],"sourceRoot":""}